{"componentChunkName":"component---src-templates-blog-template-js","path":"/cdn/","result":{"data":{"cur":{"id":"ff4d68a5-f01f-5ae1-92ba-074f403b2c61","html":"<h2 id=\"intro\" style=\"position:relative;\"><a href=\"#intro\" aria-label=\"intro permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Intro</h2>\n<hr>\n<ul>\n<li>ì´ë²ˆì— í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ ì§ì ‘ S3 ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ì—ˆê¸° ë•Œë¬¸ì— AWSì—ì„œ ì œê³µí•˜ëŠ” CDN ì„œë¹„ìŠ¤ì¸ CloudFrontë¥¼ í†µí•´ì„œ ì´ë¯¸ì§€ ë“±ì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•´ì•¼ í–ˆë‹¤. (CDNì„œë²„ì˜ ë³¸ë˜ ëª©ì ê³¼ëŠ” ë‹¤ì†Œ ë‹¤ë¥¸ ì´ìœ ë¡œ ì‚¬ìš©í–ˆë‹¤.)</li>\n<li>CDNì€ ì–´ë–¤ ê¸°ìˆ ì´ë©°, ì¥ì ì´ ë¬´ì—‡ì´ê³ , ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œ ì•Œì•„ë³¸ë‹¤. </li>\n<li>CDNì„ í‰í•´ ëˆ„ë¦´ ìˆ˜ ìˆëŠ” ë³´ì•ˆì ì¸ ì´ì ì€ ë¬´ì—‡ì´ë©°, í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ CloudFrontë¥¼ ì–´ë–»ê²Œ í™œìš©í–ˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì‘ì„±í•œë‹¤. </li>\n</ul>\n<br>\n<br>\n<h2 id=\"cdnì´ë€-ë¬´ì—‡ì¸ê°€\" style=\"position:relative;\"><a href=\"#cdn%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\" aria-label=\"cdnì´ë€ ë¬´ì—‡ì¸ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CDNì´ë€ ë¬´ì—‡ì¸ê°€?</h2>\n<hr>\n<p>CDNì€ Content Delivery Networkì˜ ì•½ìì´ë‹¤. ì§ì—­í•˜ìë©´ ì»¨í…ì¸ ë¥¼ ì „ë‹¬í•´ì£¼ëŠ” ë„¤íŠ¸ì›Œí¬ì´ë‹¤. CDN ì»¨í…ì¸ ë¥¼ ì „ì†¡í•˜ëŠ” ë¬¼ë¦¬ì ì¸ ì„œë²„ê°€ ì§€ë¦¬ì ìœ¼ë¡œ ì—¬ëŸ¬ê³³ì— ìƒì£¼í•˜ë©° ìœ ì €ì™€ ê°€ê¹Œì´ ìœ„ì¹˜í•œ ì„œë²„ì—ì„œ ìš”ì²­í•œ ì»¨í…ì¸ ë¥¼ ê³ ì†ìœ¼ë¡œ ì œê³µí•´ì¤€ë‹¤.\n<br></p>\n<p>CDNì´ ì œê³µí•˜ëŠ” ì»¨í…ì¸ ëŠ” <code class=\"language-text\">HTML</code>, <code class=\"language-text\">javascript</code> íŒŒì¼, <code class=\"language-text\">css</code>, ì´ë¯¸ì§€, ë™ì˜ìƒ ë“±ì˜ ëŒ€ë¶€ë¶„ì˜ ì¸í„°ë„· ì½˜í…ì¸ ì´ë‹¤. CDN ì„œë¹„ìŠ¤ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ëŠ” ì˜ˆì‹œì— í•­ìƒ ë“±ì¥í•˜ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ë„·í”Œë¦­ìŠ¤ì´ë‹¤. ì „ì„¸ê³„ ê³³ê³³ì—ì„œ ìœ ì €ë“¤ì´ ë„·í”Œë¦­ìŠ¤ ì»¨í…ì¸ ë¥¼ ìš”ì²­í•˜ë©´ ê°€ì¥ ê°€ê¹Œì´ ìƒì£¼í•˜ê³  ìˆëŠ” CDN ì„œë²„ì—ì„œ ë„·í”Œë¦­ìŠ¤ ì»¨í…ì¸ ë¥¼ ë¹ ë¥´ê²Œ ìœ ì €ì—ê²Œ ì œê³µí•œë‹¤. ì´ì™¸ì— Facebook, Amazon ë“±ë„ ì‚¬ìš© ì¤‘ì´ë‹¤.\n<br></p>\n<p>CDNì„ ìì²´ë¡œ ì›¹ì„ í˜¸ìŠ¤íŒ… í•  ìˆ˜ëŠ” ì—†ë‹¤. ë‹¤ë§Œ ì›¹ì˜ ì»¨í…ì¸ ë¥¼ <code class=\"language-text\">ìºì‹±</code>í•˜ì—¬ í˜¸ìŠ¤íŒ…í•˜ëŠ” ì›¹ì„ ëŒ€ì‹ í•˜ì—¬ ì „ì†¡í•´ì„œ ì›¹ì˜ ì„±ëŠ¥ì„ ê°œì„ í•œë‹¤.\n<br>\n<br></p>\n<h2 id=\"cdn-ì¥ì \" style=\"position:relative;\"><a href=\"#cdn-%EC%9E%A5%EC%A0%90\" aria-label=\"cdn ì¥ì  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CDN ì¥ì </h2>\n<hr>\n<ol>\n<li>\n<p>ìºì‹±ìœ¼ë¡œ ì»¨í…ì¸  ê³ ì† ì „ì†¡</p>\n<ul>\n<li>ì‚¬ìš©ìì™€ ë¬¼ë¦¬ì ìœ¼ë¡œ ê°€ê¹Œìš´ CDN ì„œë²„ì—ì„œ ì»¨í…ì¸ ë¥¼ ì „ì†¡í•˜ë¯€ë¡œ ì‚¬ìš©ìì˜ ì…ì¥ì—ì„œ ì»¨í…ì¸  ë¡œë“œ ì‹œê°„ì´ ë§¤ìš° ë‹¨ì¶•ëœë‹¤. ë˜í•œ CDN ì„œë²„ëŠ” ëœë¤ìœ¼ë¡œ ë°°ì¹˜ë˜ì–´ ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì „ì„¸ê³„ íŠ¸ë˜í”½ì´ ë§ì€ ì˜ì—­ì— ì „ëµì ìœ¼ë¡œ ìœ„ì¹˜í•´ ìˆë‹¤. </li>\n<li>\n<p>ìºì‹± ê³¼ì • </p>\n<ol>\n<li>ì‚¬ìš©ìê°€ ì»¨í…ì¸ ë¥¼ ìš”ì²­í•˜ë©´ ê°€ì¥ ê°€ê¹Œìš´ CDN ì—£ì§€ ì„œë²„ë¡œ ìš”ì²­ì´ ê°„ë‹¤. </li>\n<li>(ìµœì´ˆ ìš”ì²­ì¼ ê²½ìš°) CDN ì—£ì§€ ì„œë²„ì—ì„œ ì›ë³¸ ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤. </li>\n<li>ì›ë³¸ ì„œë²„ê°€ í•´ë‹¹ ì»¨í…ì¸ ë¥¼ ì—£ì§€ ì„œë²„ì— ì‘ë‹µí•œë‹¤. </li>\n<li>\n<p>ì—£ì§€ ì„œë²„ê°€ ì‚¬ìš©ìì—ê²Œ ì»¨í…ì¸ ë¥¼ ì‘ë‹µí•œë‹¤.\n<br></p>\n<p align=\"center\"><img width=\"450\" src=\"https://user-images.githubusercontent.com/63405904/130417611-508fcc23-79f2-4ae7-923b-5a0989a2cf54.png\"><br>ì´ë¯¸ì§€ ì¶œì²˜: https://www.cloudflare.com/ko-kr/learning/cdn/performance/</p>\n</li>\n</ol>\n</li>\n<li>\n<p>ê·¸ ì´í›„ë¶€í„°ëŠ” ë™ì¼í•œ ì»¨í…ì¸ ì— ëŒ€í•œ ìš”ì²­ì´ ìˆì„ ë•Œ í•´ë‹¹ ì»¨í…ì¸ ê°€ ë™ì¼í•œ CDN ì—£ì§€ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ê³  ì›ë³¸ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚¼ í•„ìš” ì—†ì´ CDN ì—£ì§€ ì„œë²„ê°€ ì»¨í…ì¸ ë¥¼ ë°˜í™˜í•œë‹¤. ì´ë•Œ ì†ë„ê°€ êµ‰ì¥íˆ í–¥ìƒëœë‹¤.\n<br></p>\n<p align=\"center\"><img width=\"450\" src=\"https://user-images.githubusercontent.com/63405904/130417751-e2d97680-8446-401e-bdec-90b95560f87f.png\"><br>ì´ë¯¸ì§€ ì¶œì²˜: https://www.cloudflare.com/ko-kr/learning/cdn/performance/</p>\n</li>\n</ul>\n</li>\n</ol>\n<br>\n<ol start=\"2\">\n<li>\n<p>CDNì˜ failover</p>\n<ul>\n<li>failoverë€? ì„œë²„ê°€ ê°‘ìê¸° ì¤‘ë‹¨ë˜ì–´ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ë˜ íŠ¸ë˜í”½ì— ëŒ€í•´ ì •ìƒì ì¸ ì‘ë‹µì„ í•˜ì§€ ëª»í•˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ëŠ” ê²ƒ</li>\n<li>\n<p>CDNì€ ìš”ì²­ì„ ë³´ë‚´ë˜ origin serverê°€ ì£½ìœ¼ë©´ ì •ìƒì ìœ¼ë¡œ ì‘ë‹µì„ í•  ìˆ˜ ìˆëŠ” ì„œë²„ë¡œ reroute í•˜ì—¬ ì‚¬ìš©ìê°€ ì•ˆì •ì ìœ¼ë¡œ ê·¸ ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ í•œë‹¤.\n<br></p>\n<p align=\"center\"><img width=\"433\" src=\"https://user-images.githubusercontent.com/63405904/130594395-77cf44f3-049c-4a4c-9be2-f59678f77b7c.png\"><br>ì´ë¯¸ì§€ ì¶œì²˜: https://www.cloudflare.com/ko-kr/learning/cdn/cdn-load-balance-reliability/</p>\n</li>\n</ul>\n</li>\n</ol>\n<br>\n<ol start=\"3\">\n<li>\n<p>ë¡œë“œë°¸ëŸ°ì‹± ë° DDos ê³µê²© ì™„í™”</p>\n<ul>\n<li>ë¡œë“œ ë°¸ëŸ°ì„œëŠ” ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ì—¬ëŸ¬ ì„œë²„ì— ë¶„ì‚°í•´ì„œ ì„±ëŠ¥ì„ ê°œì„ í•˜ëŠ” ê²ƒì´ë‹¤. </li>\n<li>CDNì€ GSLB(Global Server Load Balancing)ìœ¼ë¡œ ë¡œë“œ ë°¸ëŸ°ì‹± ê¸°ìˆ ì„ ì œê³µí•œë‹¤. (DNSì™€ GSLBì˜ ì°¨ì´ì ì— ëŒ€í•´ì„œ í•™ìŠµí•´ë„ ì¢‹ë‹¤.) <a href=\"https://www.cloudflare.com/ko-kr/learning/cdn/glossary/global-server-load-balancing-gslb/\">GSLB ì°¸ê³ </a></li>\n<li>CDNì€ ë°ì´í„°ì„¼í„°ì˜ ë¡œë“œ ë°¸ëŸ°ì‹±ìœ¼ë¡œ ì‚¬ìš©ìì˜ ìš”ì²­ì„ ê°€ëŠ¥í•œ ì„œë²„ì— ë¶„ì‚°í•´ì„œ ìš”ì²­í•œë‹¤. (GSLBë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ìš”ì²­ ì„œë²„ì— ëŒ€í•œ í—¬ìŠ¤ì²´í¬ë„ ìˆ˜í–‰í•˜ì—¬ ì•ˆì •ì ì´ë‹¤.)</li>\n<li>\n<p>ì†ë„ë„ ê°œì„ ì‹œí‚¤ê³ , íŠ¸ë˜í”½ë„ ê°ì†Œì‹œí‚¤ë¯€ë¡œ DDos ê³µê²©ë„ ë°©ì§€í•  ìˆ˜ ìˆë‹¤. </p>\n<p align=\"center\"><img width=\"630\" src=\"https://user-images.githubusercontent.com/63405904/130593424-74c410aa-b465-4fee-8dd1-e4213090064a.png\"><br>ì´ë¯¸ì§€ ì¶œì²˜: https://www.cloudflare.com/ko-kr/learning/cdn/cdn-load-balance-reliability/</p>\n</li>\n</ul>\n</li>\n</ol>\n<br>\n<br>\n<h2 id=\"í”„ë¡œì íŠ¸ì—ì„œ-cdn-ì‚¬ìš©-ëª©ì \" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90%EC%84%9C-cdn-%EC%82%AC%EC%9A%A9-%EB%AA%A9%EC%A0%81\" aria-label=\"í”„ë¡œì íŠ¸ì—ì„œ cdn ì‚¬ìš© ëª©ì  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í”„ë¡œì íŠ¸ì—ì„œ CDN ì‚¬ìš© ëª©ì </h2>\n<hr>\n<ul>\n<li>\n<p>ë‹¤ìŒì€ í”„ë¡œì íŠ¸ì˜ ì¸í”„ë¼ êµ¬ì¡°ì´ë‹¤. </p>\n<p align=\"center\"><img width=\"605\" src=\"https://user-images.githubusercontent.com/63405904/130720611-034be1a1-c358-4ce5-8fac-8383a87d19e0.png\"></p>\n</li>\n<li>ì¼ë°˜ì ì¸ì§€ëŠ” ì˜ ëª¨ë¥´ê² ì§€ë§Œ, í˜„ì¬ S3 ë²„í‚·ì— í”„ë¡ íŠ¸ ì„œë²„ê°€ ì˜¬ë¼ê°€ìˆë‹¤. (ê·¸ë ‡ì§€ ì•Šë”ë¼ë„ ì´ë¯¸ì§€ ë° ë™ì˜ìƒ ë¦¬ì†ŒìŠ¤ê°€ S3 ë²„í‚·ì— ì €ì¥ë˜ì–´ ìˆë‹¤.) </li>\n<li>í”„ë¡œì íŠ¸ë¥¼ í•˜ëŠ”ë° ë³´ì•ˆìƒì˜ ì´ìŠˆë¡œ S3 ë²„í‚·ì— ëŒ€í•œ ì ‘ê·¼ì„ ì „ì²´ê³µê°œí•  ìˆ˜ ì—†ì—ˆê³ , Cloud Frontë¥¼ í†µí•´ì„œ ìš°íšŒí•˜ì—¬ ì ‘ê·¼í•˜ë„ë¡ ì„¤ê³„í–ˆë‹¤. </li>\n<li>CDNì˜ ë³¸ë˜ ëª©ì ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ìºì‹±í•˜ì—¬ ë¹ ë¥´ê²Œ ë¡œë”©í•˜ëŠ” ê²ƒì´ì§€ë§Œ ì´ë²ˆ í”„ë¡œì íŠ¸ì—ì„œëŠ” S3 ë²„í‚· ì‚¬ìš© ëª©ì ìœ¼ë¡œ ì„¤ê³„í–ˆë‹¤. </li>\n<li>í”„ë¡ íŠ¸ ì„œë²„ë¥¼ ë¶„ì‚°í•˜ê±°ë‚˜, ì§„í–‰ì¤‘ì¸ í”„ë¡œì íŠ¸(ê°œë°œì ì¹œí™”ì  SNS)ì˜ íŠ¹ì„±ìƒ ì´ë¯¸ì§€ ë° ë™ì˜ìƒ ë¦¬ì†ŒìŠ¤ê°€ êµ‰ì¥íˆ ë§ì•„ì ¸ì„œ S3 ë²„í‚·ì´ ì¶”ê°€ë˜ë©´ ë¡œë“œ ë°¸ëŸ°ì‹±, CDN failover ë“±ì˜ ì´ì ì„ ëˆ„ë¦´ ìˆ˜ ìˆì„ ê²ƒì´ë¼ê³  ìƒê°í•œë‹¤. </li>\n</ul>\n<br>\n<br>\n<p><strong>[ì°¸ê³ ìë£Œ]</strong></p>\n<ul>\n<li><a href=\"https://www.cloudflare.com/ko-kr/learning/cdn/performance/\">https://www.cloudflare.com/ko-kr/learning/cdn/performance/</a></li>\n<li><a href=\"https://www.cloudflare.com/ko-kr/learning/cdn/cdn-load-balance-reliability/\">https://www.cloudflare.com/ko-kr/learning/cdn/cdn-load-balance-reliability/</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#intro\">Intro</a></li>\n<li><a href=\"#cdn%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\">CDNì´ë€ ë¬´ì—‡ì¸ê°€?</a></li>\n<li><a href=\"#cdn-%EC%9E%A5%EC%A0%90\">CDN ì¥ì </a></li>\n<li><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90%EC%84%9C-cdn-%EC%82%AC%EC%9A%A9-%EB%AA%A9%EC%A0%81\">í”„ë¡œì íŠ¸ì—ì„œ CDN ì‚¬ìš© ëª©ì </a></li>\n</ul>\n</div>","excerpt":"Intro ì´ë²ˆì— í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ ì§ì ‘ S3 ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ì—ˆê¸° ë•Œë¬¸ì— AWSì—ì„œ ì œê³µí•˜ëŠ” CDN ì„œë¹„ìŠ¤ì¸ CloudFrontë¥¼ í†µí•´ì„œ ì´ë¯¸ì§€ ë“±ì˜ ë¦¬ì†ŒìŠ¤ì— ì ‘ê·¼í•´ì•¼ í–ˆë‹¤. (CDNì„œë²„ì˜ ë³¸ë˜ ëª©ì ê³¼ëŠ” ë‹¤ì†Œ ë‹¤ë¥¸ ì´ìœ ë¡œ ì‚¬ìš©í–ˆë‹¤.) CDNì€ ì–´ë–¤ ê¸°ìˆ ì´ë©°, ì¥ì ì´ ë¬´ì—‡ì´ê³ , ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œ ì•Œì•„ë³¸ë‹¤.  CDNì„ í‰í•´ ëˆ„ë¦´ ìˆ˜ ìˆëŠ” ë³´ì•ˆì ì¸ ì´ì ì€ ë¬´ì—‡ì´ë©°, í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ CloudFrontë¥¼ ì–´ë–»ê²Œ í™œìš©í–ˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì‘ì„±í•œë‹¤.  CDNì´ë€ ë¬´ì—‡ì¸ê°€? CDNì€ Content Delivery Networkì˜ ì•½ìì´ë‹¤. ì§ì—­í•˜ìë©´ ì»¨í…ì¸ ë¥¼ ì „ë‹¬í•´ì£¼ëŠ” ë„¤íŠ¸ì›Œí¬ì´ë‹¤. CDN ì»¨í…ì¸ ë¥¼ ì „ì†¡í•˜ëŠ” ë¬¼ë¦¬ì ì¸ ì„œë²„ê°€ ì§€ë¦¬ì ìœ¼ë¡œ ì—¬ëŸ¬ê³³ì— ìƒì£¼í•˜ë©° ìœ ì €ì™€ ê°€ê¹Œì´ ìœ„ì¹˜í•œ ì„œë²„ì—ì„œ ìš”ì²­í•œ ì»¨í…ì¸ ë¥¼ ê³ ì†ìœ¼ë¡œ ì œê³µí•´ì¤€ë‹¤. \n CDNì´ ì œê³µí•˜ëŠ” ì»¨í…ì¸ ëŠ” ,  íŒŒì¼, , ì´ë¯¸ì§€, ë™ì˜ìƒ ë“±ì˜ ëŒ€ë¶€ë¶„ì˜ ì¸í„°ë„· ì½˜í…ì¸ ì´ë‹¤. CDN ì„œë¹„ìŠ¤ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ëŠ” ì˜ˆì‹œì— í•­ìƒ ë“±â€¦","frontmatter":{"date":"September 02, 2021","title":"CDN ì•Œì•„ë³´ê¸°","categories":"ì¸í”„ë¼","author":"ì½”ë‹¤","emoji":"ğŸšŠ"},"fields":{"slug":"/cdn/"}},"next":{"id":"7bad748d-3789-5403-bce9-4bf2f8205619","html":"<h2 id=\"intro\" style=\"position:relative;\"><a href=\"#intro\" aria-label=\"intro permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>INTRO</h2>\n<ul>\n<li>JPAì—ì„œëŠ” ë°ì´í„°ì™€ ê°ì²´ì§€í–¥ìœ¼ë¡œ ì„¤ê³„ ì‚¬ì´ì˜ ëª¨ìˆœì„ í•´ì†Œí•˜ê¸° ìœ„í•´ì„œ ë‚˜ì˜¨ ê¸°ìˆ ì´ë‹¤. </li>\n<li>\n<p>ë§ì€ ê°ì²´ë“¤ì€ ë‚´ë¶€ì— Collection í˜•íƒœë¡œ ë‹¤ë¥¸ ê°ì²´ì— ëŒ€í•œ ì°¸ì¡°ê°€ ê°€ëŠ¥í•˜ê²Œ ì„¤ê³„ëœë‹¤. </p>\n<ul>\n<li>ì˜ˆ) <code class=\"language-text\">Team</code> ê°ì²´ ë‚´ë¶€ì— <code class=\"language-text\">Team</code>ì— ì†í•´ìˆëŠ” <code class=\"language-text\">List&lt;Member></code> ì™€ íŒ€ì— í• ë‹¹ëœ <code class=\"language-text\">List&lt;Locker></code>ê°€ ì¡´ì¬í•œë‹¤. </li>\n</ul>\n</li>\n<li>\n<p>ì´ë•Œ ìƒìœ„ ê°ì²´ë¥¼ select í•˜ë©´ì„œ í•˜ìœ„ ê°ì²´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²½ìš° ë‹¤ìŒ ë‘ê°€ì§€ fetch íƒ€ì…ì— ê°ê° ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œê°€ ìˆë‹¤. </p>\n<ul>\n<li><code class=\"language-text\">fetch = FetchType.EAGER</code>ì¼ ê²½ìš° : <code class=\"language-text\">MultipleBagFetchException</code>ì´ ë°œìƒ</li>\n<li><code class=\"language-text\">fetch = FetchType.LAZY</code>ì¼ ê²½ìš° : <code class=\"language-text\">N+1</code> ë¬¸ì œ ë°œìƒ</li>\n</ul>\n</li>\n<li>ìƒìœ„ ì—”í‹°í‹°ì—ì„œ ë‹¤ìˆ˜ì˜ collection í˜•íƒœì˜ ì—°ê´€ì—”í‹°í‹°ë¥¼ ê°€ì§€ê³  ìˆì„ ë•Œ ì—¬ëŸ¬ ìƒí™© ë° ë¬¸ì œì™€ í•´ê²° ë°©ë²•ì— ëŒ€í•´ì„œ ê³µë¶€í•´ë³¸ë‹¤. </li>\n</ul>\n<br>\n<h2 id=\"entity-ìƒí™©\" style=\"position:relative;\"><a href=\"#entity-%EC%83%81%ED%99%A9\" aria-label=\"entity ìƒí™© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Entity ìƒí™©</h2>\n<ul>\n<li><code class=\"language-text\">Team</code>ê³¼ <code class=\"language-text\">Member</code>ê°€ 1:N ì—°ê´€ê´€ê³„ - <code class=\"language-text\">FetchType.LAZY</code>, <code class=\"language-text\">cascadeType.PERSIST</code></li>\n<li><code class=\"language-text\">Team</code>ê³¼ <code class=\"language-text\">Locker</code>ê°€ 1:N ì—°ê´€ê´€ê³„ - <code class=\"language-text\">FetchType.LAZY</code>, <code class=\"language-text\">cascadeType.PERSIST</code></li>\n<li>ì°¸ê³  : ìš°ì„  ëª¨ë“  ì—°ê´€ê´€ê³„ëŠ” <code class=\"language-text\">LAZY</code>ë¡œ ì ìš©í•˜ê³  í…ŒìŠ¤íŠ¸ ìƒí™©ì— ë”°ë¼ <code class=\"language-text\">EAGER</code>ë¡œ ë³€ê²½</li>\n<li>\n<p><code class=\"language-text\">Team</code> ì—”í‹°í‹°</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Team</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span> <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span>IDENTITY<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>\n        mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"team\"</span><span class=\"token punctuation\">,</span>\n        cascade <span class=\"token operator\">=</span> <span class=\"token class-name\">CascadeType</span><span class=\"token punctuation\">.</span>PERSIST<span class=\"token punctuation\">,</span>\n        fetch <span class=\"token operator\">=</span> <span class=\"token class-name\">FetchType</span><span class=\"token punctuation\">.</span>EAGER<span class=\"token punctuation\">,</span>\n        orphanRemoval <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> members <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>\n        mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"team\"</span><span class=\"token punctuation\">,</span>\n        cascade <span class=\"token operator\">=</span> <span class=\"token class-name\">CascadeType</span><span class=\"token punctuation\">.</span>PERSIST<span class=\"token punctuation\">,</span>\n        fetch <span class=\"token operator\">=</span> <span class=\"token class-name\">FetchType</span><span class=\"token punctuation\">.</span>EAGER<span class=\"token punctuation\">,</span>\n        orphanRemoval <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Locker</span><span class=\"token punctuation\">></span></span> lockers<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Team</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//...ìƒì„±ì ìƒëµ </span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addLocker</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Locker</span> locker<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        locker<span class=\"token punctuation\">.</span><span class=\"token function\">setTeam</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        lockers<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>locker<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setMembers</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> members<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        members<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>member <span class=\"token operator\">-></span> member<span class=\"token punctuation\">.</span><span class=\"token function\">setTeam</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>members <span class=\"token operator\">=</span> members<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//...getter ìƒëµ</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">Member</code> ì—”í‹°í‹°</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span> <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span>IDENTITY<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@ManyToOne</span><span class=\"token punctuation\">(</span>fetch <span class=\"token operator\">=</span> <span class=\"token class-name\">FetchType</span><span class=\"token punctuation\">.</span>LAZY<span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@JoinColumn</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"team_id\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Team</span> team<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//ìƒì„±ì ë° setter, getter ìƒëµ</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">Locker</code> ì—”í‹°í‹°</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Locker</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span> <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span>IDENTITY<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@ManyToOne</span>\n    <span class=\"token annotation punctuation\">@JoinColumn</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"team_id\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Team</span> team<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token class-name\">Locker</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">//ìƒì„±ì ë° setter, getter ìƒëµ</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<br>\n<h2 id=\"jpaì—ì„œ-collection-fetch-join\" style=\"position:relative;\"><a href=\"#jpa%EC%97%90%EC%84%9C-collection-fetch-join\" aria-label=\"jpaì—ì„œ collection fetch join permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPAì—ì„œ collection fetch join</h2>\n<ul>\n<li>Teamì— ëŒ€í•œ ëª¨ë“  ì •ë³´ê°€ í•„ìš”í•œ ê²½ìš° Teamì„ ê°€ì ¸ì˜¤ë©´ì„œ Membersì™€ Lockers ì •ë³´ë„ ëª¨ë‘ í•¨ê»˜ ê°€ì§€ê³  ì™€ì•¼í•˜ëŠ” ê²½ìš°ê°€ ìˆì„ ìˆ˜ ìˆë‹¤. </li>\n<li>\n<p>JPAì—ì„œëŠ” <code class=\"language-text\">OneToMany</code>ê´€ê³„ì—ì„œ fetch joinì„ í•  ê²½ìš° ì¤‘ë³µ ë°ì´í„°ê°€ ë°œìƒí•œë‹¤. ë”°ë¼ì„œ í•´ê²°ì„ í•˜ê¸° ìœ„í•´ì„œ ì¿¼ë¦¬ì— <code class=\"language-text\">distinct</code>ë¥¼ ì¶”ê°€í•´ì£¼ì–´ ì¤‘ë³µì„ ì—†ì• ì•¼í•œë‹¤. </p>\n<ol>\n<li>\n<p><code class=\"language-text\">distinct</code>ê°€ ì—†ëŠ” collection fetch join</p>\n<ul>\n<li>\n<p>TeamRepository.java</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select t from Team t join fetch t.members\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Team</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAllJoinFetchMembers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">distinct</code> ìˆëŠ” collection fetch join</p>\n<ul>\n<li>\n<p>TeamRepository.java</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select distinct t from Team t join fetch t.members\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Team</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAllJoinFetchMembers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>ì‹¤ì œ ì‹¤í–‰ëœ query </p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span>\n    team0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_2_0_<span class=\"token punctuation\">,</span>\n    members1_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_1_1_<span class=\"token punctuation\">,</span>\n    team0_<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">as</span> name2_2_0_<span class=\"token punctuation\">,</span>\n    members1_<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">as</span> name2_1_1_<span class=\"token punctuation\">,</span>\n    members1_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_1_1_<span class=\"token punctuation\">,</span>\n    members1_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_1_0__<span class=\"token punctuation\">,</span>\n    members1_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_1_0__ \n<span class=\"token keyword\">from</span>\n    team team0_ \n<span class=\"token keyword\">inner</span> <span class=\"token keyword\">join</span>\n    member members1_ \n        <span class=\"token keyword\">on</span> team0_<span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span>members1_<span class=\"token punctuation\">.</span>team_id</code></pre></div>\n<br>\n</li>\n<li>\n<p>Test Method </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@BeforeEach</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Team</span> teamA <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Team</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"teamA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    teamA<span class=\"token punctuation\">.</span><span class=\"token function\">addLocker</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Locker</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"L1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    teamA<span class=\"token punctuation\">.</span><span class=\"token function\">addLocker</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Locker</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"L2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Team</span> teamB <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Team</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"teamB\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    teamB<span class=\"token punctuation\">.</span><span class=\"token function\">addLocker</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Locker</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"L3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    teamB<span class=\"token punctuation\">.</span><span class=\"token function\">addLocker</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Locker</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"L4\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Member</span> memberA1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberA1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Member</span> memberA2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberA2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Member</span> memberA3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberA3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Member</span> memberB1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberB1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Member</span> memberB2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberB2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Member</span> memberB3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberB3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> teamAMembers <span class=\"token operator\">=</span> <span class=\"token class-name\">List</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span>memberA1<span class=\"token punctuation\">,</span> memberA2<span class=\"token punctuation\">,</span> memberA3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> teamBMembers <span class=\"token operator\">=</span> <span class=\"token class-name\">List</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span>memberB1<span class=\"token punctuation\">,</span> memberB2<span class=\"token punctuation\">,</span> memberB3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    teamA<span class=\"token punctuation\">.</span><span class=\"token function\">setMembers</span><span class=\"token punctuation\">(</span>teamAMembers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    teamB<span class=\"token punctuation\">.</span><span class=\"token function\">setMembers</span><span class=\"token punctuation\">(</span>teamBMembers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    teamRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>teamA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    teamRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>teamB<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    testEntityManager<span class=\"token punctuation\">.</span><span class=\"token function\">flush</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    testEntityManager<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"collection fetch join ë°ì´í„°ì— ëŒ€í•´ ë°ì´í„° ë»¥íŠ€ê¸°ê°€ ë°œìƒí•œë‹¤.\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">collectionFetchJoin_DuplicatedDataSelected</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Team</span><span class=\"token punctuation\">></span></span> teams <span class=\"token operator\">=</span> teamRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//membersì™€ lockersê°€ ì§€ì—°ë¡œë”©ì´ë¯€ë¡œ select ì¿¼ë¦¬ 1ê°œ</span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>teams<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    testEntityManager<span class=\"token punctuation\">.</span><span class=\"token function\">flush</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    testEntityManager<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"======================================\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Team</span><span class=\"token punctuation\">></span></span> teamsWithMembers <span class=\"token operator\">=</span> teamRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findAllJoinFetchMembers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>teamsWithMembers<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// membersì— ëŒ€í•œ fetch joinì„ í•  ê²½ìš°(distinct ì—†ìŒ) ë°ì´í„° ë»¥íŠ€ê¸°ê°€ ë°œìƒí•œë‹¤.</span>\n\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Team</span><span class=\"token punctuation\">></span></span> teamsWithMembers <span class=\"token operator\">=</span> teamRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findAllJoinFetchMembers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>teamsWithMembers<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// membersì— ëŒ€í•œ fetch joinì„ í•  ê²½ìš°(distinct ìˆìŒ) ë°ì´í„° ì¤‘ë³µì´ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ol>\n</li>\n</ul>\n<br>\n<h2 id=\"code-classlanguage-textfetchtypeeagercode---code-classlanguage-textmultiplebagfetchexceptioncode-ë°œìƒ\" style=\"position:relative;\"><a href=\"#code-classlanguage-textfetchtypeeagercode---code-classlanguage-textmultiplebagfetchexceptioncode-%EB%B0%9C%EC%83%9D\" aria-label=\"code classlanguage textfetchtypeeagercode   code classlanguage textmultiplebagfetchexceptioncode ë°œìƒ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">FetchType.EAGER</code> - <code class=\"language-text\">MultipleBagFetchException</code> ë°œìƒ</h2>\n<ul>\n<li>í˜„ì¬ëŠ” ìœ„ì— ì—°ê´€ê´€ê³„ fetchTypeì´ <code class=\"language-text\">LAZY</code>ë¡œ ë˜ì–´ ìˆì§€ë§Œ ë‘ ê°€ì§€ë¥¼ <code class=\"language-text\">EAGER</code>ë¡œ ì„¤ì •í•˜ì—¬ ì¦‰ì‹œë¡œë”© í•  ê²½ìš° <code class=\"language-text\">MultipleBagFetchExcpetion</code>ì´ ë°œìƒí•œë‹¤. </li>\n<li>JPAì—ì„œëŠ” ë‹¤ìˆ˜ì˜ <code class=\"language-text\">OneToMany</code>ë¡œ ì—°ê´€ê´€ê³„ê°€ ë§ºì–´ì ¸ ìˆëŠ” ì—°ê´€ ì—”í‹°í‹°ì— ëŒ€í•œ ì¦‰ì‹œë¡œë”©ì„ ë§‰ê³  ìˆëŠ”ë°, ìœ„ì—ì„œ ì–¸ê¸‰í•œ ì»¬ë ‰ì…˜ ì¦‰ì‹œë¡œë”© ì‹œ ë°œìƒí•˜ëŠ” ë°ì´í„° ë»¥íŠ€ê¸°ì— ëŒ€í•œ ì œì–´ê°€ ì–´ë µê¸° ë•Œë¬¸ì´ë‹¤. </li>\n<li>ë°œìƒ ì˜ˆì™¸ - <br>\n<code class=\"language-text\">Caused by: org.hibernate.loader.MultipleBagFetchException: cannot simultaneously fetch multiple bags:</code> </li>\n</ul>\n<br>\n<h2 id=\"code-classlanguage-textfetchtypelazycode---code-classlanguage-textn1-ë¬¸ì œcode-ë°œìƒ\" style=\"position:relative;\"><a href=\"#code-classlanguage-textfetchtypelazycode---code-classlanguage-textn1-%EB%AC%B8%EC%A0%9Ccode-%EB%B0%9C%EC%83%9D\" aria-label=\"code classlanguage textfetchtypelazycode   code classlanguage textn1 ë¬¸ì œcode ë°œìƒ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">FetchType.LAZY</code> - <code class=\"language-text\">N+1 ë¬¸ì œ</code> ë°œìƒ</h2>\n<ul>\n<li><code class=\"language-text\">Team</code>ì˜ <code class=\"language-text\">Member</code>ì™€ <code class=\"language-text\">Locker</code>ê°€ ê°ê° <code class=\"language-text\">OneToMany</code> ì—°ê´€ê´€ê³„ê°€ ë§ºì–´ì ¸ ìˆë‹¤. </li>\n<li>ë‹¤ìŒê³¼ ê°™ì´ ë©”ì†Œë“œë¥¼ ì‹¤í–‰ í•  ë•Œ N + 1 ì¿¼ë¦¬ê°€ ë°œìƒí•œë‹¤. </li>\n<li>\n<p>ì‹¤í–‰ ì„œë¹„ìŠ¤ ë¡œì§</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Teamì˜ Members, Lockers ê´€ë ¨ ì„œë¹„ìŠ¤ ë¡œì§ì´ ìˆì„ ë•Œ N+1 ë¬¸ì œê°€ ë°œìƒí•œë‹¤.\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findAll_TooManyQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Team</span><span class=\"token punctuation\">></span></span> teams <span class=\"token operator\">=</span> teamRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//ëª¨ë“  teamsë¥¼ ì¡°íšŒí•˜ëŠ” select ì¿¼ë¦¬ 1ê°œê°€ ë°œìƒí•œë‹¤.</span>\n\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> memberNames <span class=\"token operator\">=</span> teams<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//ê° íŒ€ Aê°œì— ëŒ€í•œ ê°ê°ì˜ Member select ì¿¼ë¦¬ Nê°œê°€ ë°œìƒí•œë‹¤.</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Team</span><span class=\"token operator\">::</span><span class=\"token function\">getMembers</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collection</span><span class=\"token operator\">::</span><span class=\"token function\">stream</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Member</span><span class=\"token operator\">::</span><span class=\"token function\">getName</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> lockerNums <span class=\"token operator\">=</span> teams<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//ê° íŒ€ Aê°œì— ëŒ€í•œ ê°ê°ì˜ Locker select ì¿¼ë¦¬ Nê°œê°€ ë°œìƒí•œë‹¤.</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Team</span><span class=\"token operator\">::</span><span class=\"token function\">getLockers</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collection</span><span class=\"token operator\">::</span><span class=\"token function\">stream</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Locker</span><span class=\"token operator\">::</span><span class=\"token function\">getName</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>teams<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>memberNames<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>lockerNums<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>ì‹¤ì œ ë°œìƒ ì¿¼ë¦¬</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">Hibernate: <span class=\"token comment\">#Team ì „ì²´ ì¡°íšŒ</span>\n<span class=\"token keyword\">select</span>\n    team0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_2_<span class=\"token punctuation\">,</span>\n    team0_<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">as</span> name2_2_ \n<span class=\"token keyword\">from</span>\n    team team0_\nHibernate: <span class=\"token comment\">#ì²«ë²ˆì§¸ Teamì˜ Member ì¡°íšŒ</span>\n    <span class=\"token keyword\">select</span> \n        members0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_1_0_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_1_0_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_1_1_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">as</span> name2_1_1_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_1_1_ \n    <span class=\"token keyword\">from</span>\n        member members0_ \n    <span class=\"token keyword\">where</span>\n        members0_<span class=\"token punctuation\">.</span>team_id<span class=\"token operator\">=</span>?\n\nHibernate: <span class=\"token comment\">#ë‘ë²ˆì§¸ Teamì˜ Member ì¡°íšŒ</span>\n    <span class=\"token keyword\">select</span>\n        members0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_1_0_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_1_0_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_1_1_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">as</span> name2_1_1_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_1_1_ \n    <span class=\"token keyword\">from</span>\n        member members0_ \n    <span class=\"token keyword\">where</span>\n        members0_<span class=\"token punctuation\">.</span>team_id<span class=\"token operator\">=</span>?\n\nHibernate: <span class=\"token comment\">#ì²«ë²ˆì§¸ Teamì˜ Locker ì¡°íšŒ</span>\n    <span class=\"token keyword\">select</span>\n        lockers0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_0_0_<span class=\"token punctuation\">,</span>\n        lockers0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_0_0_<span class=\"token punctuation\">,</span>\n        lockers0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_0_1_<span class=\"token punctuation\">,</span>\n        lockers0_<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">as</span> name2_0_1_<span class=\"token punctuation\">,</span>\n        lockers0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_0_1_ \n    <span class=\"token keyword\">from</span>\n        locker lockers0_ \n    <span class=\"token keyword\">where</span>\n        lockers0_<span class=\"token punctuation\">.</span>team_id<span class=\"token operator\">=</span>?\n\nHibernate: <span class=\"token comment\">#ë‘ë²ˆì§¸ Teamì˜ Locker ì¡°íšŒ</span>\n    <span class=\"token keyword\">select</span>\n        lockers0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_0_0_<span class=\"token punctuation\">,</span>\n        lockers0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_0_0_<span class=\"token punctuation\">,</span>\n        lockers0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_0_1_<span class=\"token punctuation\">,</span>\n        lockers0_<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">as</span> name2_0_1_<span class=\"token punctuation\">,</span>\n        lockers0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_0_1_ \n    <span class=\"token keyword\">from</span>\n        locker lockers0_ \n    <span class=\"token keyword\">where</span>\n        lockers0_<span class=\"token punctuation\">.</span>team_id<span class=\"token operator\">=</span>?</code></pre></div>\n</li>\n<li><code class=\"language-text\">Team</code>ì„ ì „ì²´ ì¡°íšŒí•  ë•Œ ì§€ì—°ë¡œë”©ìœ¼ë¡œ ì¸í•´ ê° <code class=\"language-text\">Team</code> ë§ˆë‹¤ <code class=\"language-text\">Member</code> ì¡°íšŒ ì¿¼ë¦¬, <code class=\"language-text\">Locker</code> ì¡°íšŒ ì¿¼ë¦¬ê°€ íŒ€ì˜ ê°œìˆ˜ N ë§Œí¼ ì¶”ê°€ë¡œ ë‚˜ê°€ë¯€ë¡œ <code class=\"language-text\">N+1 ë¬¸ì œ</code>ê°€ ë°œìƒí•œ ê²ƒì´ë‹¤.</li>\n<li>íŒ€ì˜ ê°œìˆ˜ê°€ ë§ìœ¼ë©´ ë§ì„ìˆ˜ë¡ ì¶”ê°€ì ì¸ ì¿¼ë¦¬ê°€ ë§ì´ ë‚˜ê°€ ì„±ëŠ¥ì´ ë”ìš± ë–¨ì–´ì§„ë‹¤. </li>\n<li>í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ì—°ê´€ê´€ê³„ ì—”í‹°í‹°ë¥¼ ì¦‰ì‹œë¡œë”©í•˜ê±°ë‚˜ ë¹„ìŠ·í•œ ë°©ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì ì€ ì¿¼ë¦¬ë¡œ select í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼í•œë‹¤.  </li>\n</ul>\n<br>\n<h3 id=\"í•˜ë‚˜ì˜-collection-code-classlanguage-textfetch-joincodeì„-í• -ê²½ìš°\" style=\"position:relative;\"><a href=\"#%ED%95%98%EB%82%98%EC%9D%98-collection-code-classlanguage-textfetch-joincode%EC%9D%84-%ED%95%A0-%EA%B2%BD%EC%9A%B0\" aria-label=\"í•˜ë‚˜ì˜ collection code classlanguage textfetch joincodeì„ í•  ê²½ìš° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í•˜ë‚˜ì˜ collection <code class=\"language-text\">fetch join</code>ì„ í•  ê²½ìš°</h3>\n<ul>\n<li>ìš°ì„  í•˜ë‚˜ì˜ Collectionì´ë¼ë„ <code class=\"language-text\">fetch join</code> í•œë‹¤ë©´ ì–´ë–»ê²Œ ë™ì‘ì´ ë ê¹Œ? </li>\n<li>\n<p>Teamì„ ì¡°íšŒí•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ Lockers ì»¬ë ‰ì…˜ë§Œ join fetch í•˜ë„ë¡ í•œë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select distinct t from Team t join fetch t.lockers\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Team</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAllJoinFetchLockers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>ì‹¤í–‰ ì„œë¹„ìŠ¤ ë¡œì§ì€ ë°”ë¡œ ìœ„ì™€ ê°™ê³ , teamsë¥¼ ì¡°íšŒí•  ë•Œë¬¸ ìœ„ì˜ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í–ˆë‹¤. </li>\n<li>\n<p>ì‹¤ì œ ë°œìƒ ì¿¼ë¦¬</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">Hibernate: <span class=\"token comment\">#ì „ì²´ íŒ€ ì¡°íšŒ ì‹œ lockersë¥¼ join fetch í•œë‹¤. </span>\n<span class=\"token keyword\">select</span>\n    <span class=\"token keyword\">distinct</span> team0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_2_0_<span class=\"token punctuation\">,</span>\n    lockers1_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_0_1_<span class=\"token punctuation\">,</span>\n    team0_<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">as</span> name2_2_0_<span class=\"token punctuation\">,</span>\n    lockers1_<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">as</span> name2_0_1_<span class=\"token punctuation\">,</span>\n    lockers1_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_0_1_<span class=\"token punctuation\">,</span>\n    lockers1_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_0_0__<span class=\"token punctuation\">,</span>\n    lockers1_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_0_0__ \n<span class=\"token keyword\">from</span>\n    team team0_ \n<span class=\"token keyword\">inner</span> <span class=\"token keyword\">join</span>\n    locker lockers1_ \n        <span class=\"token keyword\">on</span> team0_<span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span>lockers1_<span class=\"token punctuation\">.</span>team_id\n\nHibernate: <span class=\"token comment\">#ì²«ë²ˆì§¸ Teamì˜ Member ì¡°íšŒ</span>\n    <span class=\"token keyword\">select</span>\n        members0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_1_0_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_1_0_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_1_1_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">as</span> name2_1_1_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_1_1_ \n    <span class=\"token keyword\">from</span>\n        member members0_ \n    <span class=\"token keyword\">where</span>\n        members0_<span class=\"token punctuation\">.</span>team_id<span class=\"token operator\">=</span>?\n\n    <span class=\"token keyword\">select</span> <span class=\"token comment\">#ë‘ë²ˆì§¸ Teamì˜ Member ì¡°íšŒ</span>\n        members0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_1_0_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_1_0_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_1_1_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">as</span> name2_1_1_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_1_1_ \n    <span class=\"token keyword\">from</span>\n        member members0_ \n    <span class=\"token keyword\">where</span>\n        members0_<span class=\"token punctuation\">.</span>team_id<span class=\"token operator\">=</span>?</code></pre></div>\n<ul>\n<li>Lockers ì»¬ë ‰ì…˜ì„ join fetch í•´ì„œ ì¦‰ì‹œë¡œë”© í–ˆìœ¼ë‹ˆ, lockers ì»¬ë ‰ì…˜ ê´€ë ¨ ì„œë¹„ìŠ¤ ë¡œì§ ì‹¤í–‰ ì‹œ ì¶”ê°€ ì¿¼ë¦¬ëŠ” ë°œìƒí•˜ì§€ ì•Šì•˜ë‹¤. </li>\n<li>ì—¬ì „íˆ Membersì— ëŒ€í•´ì„œëŠ” team Nê°œ ë§Œí¼ì˜ ì¶”ê°€ ì¿¼ë¦¬ Nê°œê°€ ë°œìƒí–ˆë‹¤. </li>\n<li>ì–´ëŠì •ë„ ì¿¼ë¦¬ê°€ ì¤„ê¸´ í–ˆìœ¼ë‚˜, ì—¬ì ¼íˆ <code class=\"language-text\">N+1 ë¬¸ì œ</code>ê°€ ë°œìƒí•˜ê³  ìˆë‹¤. </li>\n</ul>\n</li>\n</ul>\n<br>\n<br>\n<h2 id=\"ë‹¤ìˆ˜ì˜-collection-code-classlanguage-textfetch-joincodeì„-í• -ê²½ìš°---code-classlanguage-textmutiplebagfetchexceptioncode-ë°œìƒ\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%88%98%EC%9D%98-collection-code-classlanguage-textfetch-joincode%EC%9D%84-%ED%95%A0-%EA%B2%BD%EC%9A%B0---code-classlanguage-textmutiplebagfetchexceptioncode-%EB%B0%9C%EC%83%9D\" aria-label=\"ë‹¤ìˆ˜ì˜ collection code classlanguage textfetch joincodeì„ í•  ê²½ìš°   code classlanguage textmutiplebagfetchexceptioncode ë°œìƒ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë‹¤ìˆ˜ì˜ collection <code class=\"language-text\">fetch join</code>ì„ í•  ê²½ìš° - <code class=\"language-text\">MutipleBagFetchException</code> ë°œìƒ</h2>\n<ul>\n<li>ê·¸ë ‡ë‹¤ë©´ ë‘ ê°œì˜ ì»¬ë ‰ì…˜ì„ ëª¨ë‘ fetch join í•œë‹¤ë©´ ì¿¼ë¦¬ë¥¼ ìµœì í™” í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ ìƒê°í•  ìˆ˜ ìˆë‹¤. </li>\n<li>í•˜ì§€ë§Œ ë‘ê°œì˜ OneToMany ì—°ê´€ê´€ê³„ì— ìˆëŠ” collection fetch joinì„ í•  ê²½ìš° <code class=\"language-text\">MutipleBagFetchException</code> ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤. </li>\n<li>\n<p>ë‘ê°œì˜ collectionì„ fetch join í•˜ëŠ” JPQL</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select distinct t from Team t join fetch t.members join fetch t.lockers\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Team</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAllJoinFetchAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n<li>ë°œìƒ ì˜ˆì™¸ - <br>\n<code class=\"language-text\">Caused by: org.hibernate.loader.MultipleBagFetchException: cannot simultaneously fetch multiple bags:</code> </li>\n<li>collectionì„ <code class=\"language-text\">fetch join</code> í•˜ë©´ì„œ ë°ì´í„° ë»¥íŠ€ê¸°ê°€ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸ì¸ë° ë‘ ê°œ ì´ìƒì˜ ì»¬ë ‰ì…˜ì„ í•  ê²½ìš° ê·¸ ë³µì¡ë„ê°€ ë†’ì•„ì§€ê¸° ë•Œë¬¸ì— JPAì—ì„œëŠ” ì˜ˆì™¸ë¡œ ì²˜ë¦¬í•œë‹¤. </li>\n<li>ìœ„ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸°ë„ ì „ì— <code class=\"language-text\">JPA Entity Manager</code>ì—ì„œ ì˜¤ë¥˜ë¥¼ ë°œê²¬í•˜ì—¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì‹œì‘ ë‹¹ì‹œ <code class=\"language-text\">Bean Creation</code> ë‹¨ê³„ì—ì„œ ì˜ˆì™¸ë¥¼ ë˜ì ¸ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ì§€ ëª»í•˜ê²Œ í•œë‹¤. </li>\n</ul>\n<br>\n<br>\n<h2 id=\"ë˜-ë‹¤ë¥¸-ë¬¸ì œ-jpa-pagination\" style=\"position:relative;\"><a href=\"#%EB%98%90-%EB%8B%A4%EB%A5%B8-%EB%AC%B8%EC%A0%9C-jpa-pagination\" aria-label=\"ë˜ ë‹¤ë¥¸ ë¬¸ì œ jpa pagination permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë˜ ë‹¤ë¥¸ ë¬¸ì œ, JPA Pagination</h2>\n<ul>\n<li>ìœ„ì™€ ê°™ì€ ì„œë¹„ìŠ¤ ë¡œì§ì„ ì‹¤í–‰í•  ë•Œ ë¿ ì•„ë‹ˆë¼ JPA Paginationì„ ì ìš©í•˜ë ¤ê³  í•  ë•Œ collection fetch joinì˜ ë¬¸ì œê°€ ë°œìƒí•œë‹¤. </li>\n<li>collection fetch ë¥¼ í•  ê²½ìš° ë°ì´í„° ë»¥íŠ€ê¸°ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— Pagingì— ì• ë§¤í•˜ê²Œ ë˜ê¸° ë•Œë¬¸ì— <code class=\"language-text\">select</code> í•  ë•Œ <code class=\"language-text\">WARN</code>ì´ ë°œìƒí•œë‹¤.\n<br></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"log\"><pre class=\"language-log\"><code class=\"language-log\"><span class=\"token date number\">2021-08-22</span> <span class=\"token time number\">22:04:27.898</span>  <span class=\"token level warning important\">WARN</span> <span class=\"token number\">4825</span> <span class=\"token separator comment\">---</span> <span class=\"token punctuation\">[</span>    Test worker<span class=\"token punctuation\">]</span> o<span class=\"token punctuation\">.</span>h<span class=\"token punctuation\">.</span>h<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>ast<span class=\"token punctuation\">.</span>QueryTranslatorImpl   <span class=\"token operator\">:</span> HHH000104<span class=\"token operator\">:</span> firstResult<span class=\"token operator\">/</span>maxResults specified with collection fetch<span class=\"token operator\">;</span> applying in memory<span class=\"token operator\">!</span>\n<span class=\"token property\">Hibernate:</span> \n    select\n        distinct team0_<span class=\"token punctuation\">.</span>id as id1_2_0_<span class=\"token punctuation\">,</span>\n        members1_<span class=\"token punctuation\">.</span>id as id1_1_1_<span class=\"token punctuation\">,</span>\n        team0_<span class=\"token punctuation\">.</span>name as name2_2_0_<span class=\"token punctuation\">,</span>\n        members1_<span class=\"token punctuation\">.</span>name as name2_1_1_<span class=\"token punctuation\">,</span>\n        members1_<span class=\"token punctuation\">.</span>team_id as team_id3_1_1_<span class=\"token punctuation\">,</span>\n        members1_<span class=\"token punctuation\">.</span>team_id as team_id3_1_0__<span class=\"token punctuation\">,</span>\n        members1_<span class=\"token punctuation\">.</span>id as id1_1_0__ \n    from\n        team team0_ \n    inner join\n        member members1_ \n            on team0_<span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span>members1_<span class=\"token punctuation\">.</span>team_id</code></pre></div>\n<ul>\n<li>ê·¸ë ‡ê¸° ë•Œë¬¸ì— Pageableì„ ì ìš©í•˜ë©´ì„œ N+1 ë¬¸ì œì— ëŒ€í•´ <code class=\"language-text\">fetch join</code>ë§Œì„ ì‚¬ìš©í•´ì„œ í•´ê²°í•˜ê¸°ëŠ” ì–´ë µë‹¤.</li>\n</ul>\n<br>\n<br>\n<h2 id=\"í•´ê²°ë°©ë²•-batchsize-ì ìš©í•˜ê¸°\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0%EB%B0%A9%EB%B2%95-batchsize-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"í•´ê²°ë°©ë²• batchsize ì ìš©í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í•´ê²°ë°©ë²•: BatchSize ì ìš©í•˜ê¸°</h2>\n<ul>\n<li>ìœ„ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ëŠ” BatchSizeë¥¼ ì ìš©í•˜ëŠ” ê²ƒì´ë‹¤. </li>\n<li><code class=\"language-text\">spring.jpa.properties.hibernate.default_batch_fetch_size={batchSize}</code> ë¥¼ <code class=\"language-text\">application.properties</code>ì— ì§€ì •í•˜ë©´ ì„¤ì •ëœ Batch Sizeë§Œí¼ <code class=\"language-text\">IN</code> ì¿¼ë¦¬ë¡œ ë‚ ë¼ê°„ë‹¤. </li>\n<li>\n<p>ìœ„ì™€ ë™ì¼í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‹¤í–‰ (Paginationì„ ì¶”ê°€í•œ ê²ƒ ì™¸ì—ëŠ” ë™ì¼íˆë‹¤.)</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Batch sizeë¥¼ ì ìš©í•´ Paginationì„ í•˜ë©´ N+1ë¬¸ì œë‚˜ ê²½ê³ ê°€ ëœ¨ì§€ ì•ŠëŠ”ë‹¤.\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findWithPagination</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Pageable</span> pageable <span class=\"token operator\">=</span> <span class=\"token class-name\">PageRequest</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Team</span><span class=\"token punctuation\">></span></span> teams <span class=\"token operator\">=</span> teamRepository\n        <span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span>pageable<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> memberNames <span class=\"token operator\">=</span> teams<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//ìµœëŒ€ batch sizeë§Œí¼ IN ì¿¼ë¦¬ë¡œ í•œë²ˆì— ì²˜ë¦¬ëœë‹¤</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Team</span><span class=\"token operator\">::</span><span class=\"token function\">getMembers</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collection</span><span class=\"token operator\">::</span><span class=\"token function\">stream</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Member</span><span class=\"token operator\">::</span><span class=\"token function\">getName</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> lockerNums <span class=\"token operator\">=</span> teams<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//ìµœëŒ€ batch sizeë§Œí¼ IN ì¿¼ë¦¬ë¡œ í•œë²ˆì— ì²˜ë¦¬ëœë‹¤</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Team</span><span class=\"token operator\">::</span><span class=\"token function\">getLockers</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">flatMap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Collection</span><span class=\"token operator\">::</span><span class=\"token function\">stream</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Locker</span><span class=\"token operator\">::</span><span class=\"token function\">getName</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token function\">toList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>teams<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>memberNames<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>lockerNums<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>ì‹¤ì œ ì‹¤í–‰ëœ ì¿¼ë¦¬</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">Hibernate: <span class=\"token comment\"># ì „ì²´ íŒ€ ì¡°íšŒ ì¿¼ë¦¬</span>\n<span class=\"token keyword\">select</span>\n    team0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_2_<span class=\"token punctuation\">,</span>\n    team0_<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">as</span> name2_2_ \n<span class=\"token keyword\">from</span>\n    team team0_ <span class=\"token keyword\">limit</span> ?\nHibernate: \n    <span class=\"token keyword\">select</span>\n        <span class=\"token function\">count</span><span class=\"token punctuation\">(</span>team0_<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> col_0_0_ \n    <span class=\"token keyword\">from</span>\n        team team0_\nHibernate: <span class=\"token comment\"># Team 2ê°œì˜ Idê°€ IN ì ˆë¡œ í•œë²ˆì— ì¡°íšŒëœë‹¤. </span>\n    <span class=\"token keyword\">select</span>\n        members0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_1_1_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_1_1_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_1_0_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">as</span> name2_1_0_<span class=\"token punctuation\">,</span>\n        members0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_1_0_ \n    <span class=\"token keyword\">from</span>\n        member members0_ \n    <span class=\"token keyword\">where</span>\n        members0_<span class=\"token punctuation\">.</span>team_id <span class=\"token operator\">in</span> <span class=\"token punctuation\">(</span>\n            ?<span class=\"token punctuation\">,</span> ?\n        <span class=\"token punctuation\">)</span>\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">08</span><span class=\"token operator\">-</span><span class=\"token number\">23</span> <span class=\"token number\">02</span>:<span class=\"token number\">41</span>:<span class=\"token number\">39.149</span> TRACE <span class=\"token number\">5511</span> <span class=\"token comment\">--- [    Test worker] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1]</span>\n<span class=\"token number\">2021</span><span class=\"token operator\">-</span><span class=\"token number\">08</span><span class=\"token operator\">-</span><span class=\"token number\">23</span> <span class=\"token number\">02</span>:<span class=\"token number\">41</span>:<span class=\"token number\">39.149</span> TRACE <span class=\"token number\">5511</span> <span class=\"token comment\">--- [    Test worker] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [BIGINT] - [2]</span>\nHibernate: <span class=\"token comment\"># Team 2ê°œì˜ Idê°€ IN ì ˆë¡œ í•œë²ˆì— ì¡°íšŒëœë‹¤. </span>\n    <span class=\"token keyword\">select</span>\n        lockers0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_0_1_<span class=\"token punctuation\">,</span>\n        lockers0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_0_1_<span class=\"token punctuation\">,</span>\n        lockers0_<span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> id1_0_0_<span class=\"token punctuation\">,</span>\n        lockers0_<span class=\"token punctuation\">.</span>name <span class=\"token keyword\">as</span> name2_0_0_<span class=\"token punctuation\">,</span>\n        lockers0_<span class=\"token punctuation\">.</span>team_id <span class=\"token keyword\">as</span> team_id3_0_0_ \n    <span class=\"token keyword\">from</span>\n        locker lockers0_ \n    <span class=\"token keyword\">where</span>\n        lockers0_<span class=\"token punctuation\">.</span>team_id <span class=\"token operator\">in</span> <span class=\"token punctuation\">(</span>\n            ?<span class=\"token punctuation\">,</span> ?\n        <span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n<li>ì´ì „ì—ëŠ” ì „ì²´ íŒ€ ì¡°íšŒ ì¿¼ë¦¬ 1ê°œ + Team 2ê°œì— ëŒ€í•œ Members ì¡°íšŒ ì¿¼ë¦¬ 2ê°œ + Team 2ê°œì— ëŒ€í•œ Lockers ì¡°íšŒ ì¿¼ë¦¬ 2ê°œí•´ì„œ ì´ 5ê°œì˜ ì¿¼ë¦¬ê°€ ë‚˜ê°”ë‹¤. </li>\n<li>Batch sizeë¥¼ ì ìš©í•œ ì´í›„ì—ëŠ” ì „ì²´ íŒ€ ì¡°íšŒ ì¿¼ë¦¬ 1ê°œ + Teamì˜ Members ì¡°íšŒ ì¿¼ë¦¬ 1ê°œ + Teamì˜ Lockers ì¡°íšŒ ì¿¼ë¦¬ 1ê°œ ì´ 2ê°œì˜ ì¿¼ë¦¬ê°€ ë‚˜ê°”ë‹¤. </li>\n<li>Teamì˜ ì‚¬ì´ì¦ˆê°€ í´ ìˆ˜ë¡ ë” ì¿¼ë¦¬ ì°¨ì´ê°€ ë§ì´ ë‚œë‹¤. </li>\n<li>Batch sizeëŠ” 1000ì„ ë„˜ì–´ê°€ì§€ ì•Šë„ë¡ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.</li>\n</ul>\n<br>\n<br>\n<br>\n<p><strong>[ì°¸ê³ ìë£Œ]</strong></p>\n<ul>\n<li><a href=\"https://jojoldu.tistory.com/457\">https://jojoldu.tistory.com/457</a></li>\n<li><a href=\"https://www.inflearn.com/questions/14663\">https://www.inflearn.com/questions/14663</a></li>\n<li><a href=\"https://jojoldu.tistory.com/165\">https://jojoldu.tistory.com/165</a></li>\n<li><a href=\"https://woowacourse.github.io/tecoble/post/2021-07-26-jpa-pageable/\">https://woowacourse.github.io/tecoble/post/2021-07-26-jpa-pageable/</a> </li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#intro\">INTRO</a></li>\n<li><a href=\"#entity-%EC%83%81%ED%99%A9\">Entity ìƒí™©</a></li>\n<li><a href=\"#jpa%EC%97%90%EC%84%9C-collection-fetch-join\">JPAì—ì„œ collection fetch join</a></li>\n<li><a href=\"#fetchtypeeager---multiplebagfetchexception-%EB%B0%9C%EC%83%9D\"><code class=\"language-text\">FetchType.EAGER</code> - <code class=\"language-text\">MultipleBagFetchException</code> ë°œìƒ</a></li>\n<li>\n<p><a href=\"#fetchtypelazy---n1-%EB%AC%B8%EC%A0%9C-%EB%B0%9C%EC%83%9D\"><code class=\"language-text\">FetchType.LAZY</code> - <code class=\"language-text\">N+1 ë¬¸ì œ</code> ë°œìƒ</a></p>\n<ul>\n<li><a href=\"#%ED%95%98%EB%82%98%EC%9D%98-collection-fetch-join%EC%9D%84-%ED%95%A0-%EA%B2%BD%EC%9A%B0\">í•˜ë‚˜ì˜ collection <code class=\"language-text\">fetch join</code>ì„ í•  ê²½ìš°</a></li>\n</ul>\n</li>\n<li><a href=\"#%EB%8B%A4%EC%88%98%EC%9D%98-collection-fetch-join%EC%9D%84-%ED%95%A0-%EA%B2%BD%EC%9A%B0---mutiplebagfetchexception-%EB%B0%9C%EC%83%9D\">ë‹¤ìˆ˜ì˜ collection <code class=\"language-text\">fetch join</code>ì„ í•  ê²½ìš° - <code class=\"language-text\">MutipleBagFetchException</code> ë°œìƒ</a></li>\n<li><a href=\"#%EB%98%90-%EB%8B%A4%EB%A5%B8-%EB%AC%B8%EC%A0%9C-jpa-pagination\">ë˜ ë‹¤ë¥¸ ë¬¸ì œ, JPA Pagination</a></li>\n<li><a href=\"#%ED%95%B4%EA%B2%B0%EB%B0%A9%EB%B2%95-batchsize-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\">í•´ê²°ë°©ë²•: BatchSize ì ìš©í•˜ê¸°</a></li>\n</ul>\n</div>","frontmatter":{"date":"August 26, 2021","title":"JPA N+1 ë¬¸ì œ ë° í•´ê²°ë°©ë²• ì•Œì•„ë³´ê¸°","categories":"JPA ìŠ¤í”„ë§","author":"ì½”ë‹¤","emoji":"ğŸš€"},"fields":{"slug":"/jpa-query-bug/"}},"prev":{"id":"104d60ac-d178-5742-8d47-caf93db5ba17","html":"<h2 id=\"intro\" style=\"position:relative;\"><a href=\"#intro\" aria-label=\"intro permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>INTRO</h2>\n<ul>\n<li>HTTPëŠ” Stateless ë¬´ìƒíƒœì„±ì„ ê°€ì§€ê³  ìˆë‹¤. ë”°ë¼ì„œ ë°ì´í„°ë¥¼ ìƒíƒœë¡œ ì €ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>\n<li>HTTPê°€ ë¬´ì„±íƒœì„±ì´ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ìœ ì§€í•˜ê³  ì‹¶ì„ ë•ŒëŠ” ì¿ í‚¤ ë˜ëŠ” ì„¸ì…˜ì„ ì´ìš©í•œë‹¤. (ì´ì „ì— ìš”ì²­ì„ ë³´ë‚¸ ë™ì¼í•œ ì‚¬ìš©ìì„ì„ í™•ì¸í•˜ê³  ì‹¶ì€ ê²½ìš° ë“±ë“±)</li>\n<li>ì¿ í‚¤ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì •ë³´ë¥¼ ê°€ì§€ê³  ë¸Œë¼ìš°ì €ì—ì„œ ì €ì¥ ë° ê´€ë¦¬í•œë‹¤. </li>\n<li>ì„¸ì…˜ì€ ì„œë²„ê°€ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ì €ì¥ ë° ê´€ë¦¬í•œë‹¤. </li>\n</ul>\n<br>\n<br>\n<h2 id=\"cookie\" style=\"position:relative;\"><a href=\"#cookie\" aria-label=\"cookie permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cookie</h2>\n<ul>\n<li>ì¿ í‚¤ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì •ë³´ë¥¼ ê°€ì§€ê³  ë¸Œë¼ìš°ì €ì—ì„œ í•´ë‹¹ ì •ë³´ë¥¼ ì €ì¥í•œë‹¤. </li>\n<li>\n<p>ë”°ë¼ì„œ ìš”ì²­ì„ ë³´ë‚¼ ë•Œë§ˆë‹¤ ë¸Œë¼ìš°ì €ì—ì„œ ì €ì¥ëœ ì¿ í‚¤ ë°ì´í„°ë¥¼ HTTP í—¤ë”ì— ì¶”ê°€í•˜ì—¬ ì„œë²„ì— ë³´ë‚¼ ìˆ˜ ìˆë‹¤.</p>\n<ul>\n<li>HTTP ë©”ì„¸ì§€ ìì²´ëŠ” ë¬´ìƒíƒœì„±ì´ê¸° ë•Œë¬¸ì— ë§¤ë²ˆ ì¿ í‚¤ê°’ì„ ë³´ë‚´ì£¼ì–´ì•¼ í•œë‹¤. </li>\n</ul>\n</li>\n<li>ì¿ í‚¤ì— ì €ì¥ë˜ëŠ” ê°’ì˜ í˜•íƒœëŠ” text ì´ë‹¤. </li>\n</ul>\n<h3 id=\"ì¿ í‚¤ì˜-ë‹¨ì \" style=\"position:relative;\"><a href=\"#%EC%BF%A0%ED%82%A4%EC%9D%98-%EB%8B%A8%EC%A0%90\" aria-label=\"ì¿ í‚¤ì˜ ë‹¨ì  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì¿ í‚¤ì˜ ë‹¨ì </h3>\n<ul>\n<li>\n<p>í´ë¼ì´ì–¸íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ë°ì´í„°ê°€ ì‰½ê²Œ í›¼ì† ë  ìˆ˜ ìˆë‹¤. </p>\n<ul>\n<li>ì‹¤ì œë¡œ í¬ë¡¬ ë¸Œë¼ìš°ì €ì—ì„œ ê°œë°œì ë„êµ¬ -> Application íƒ­ì— ê°€ë©´ ì¿ í‚¤ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ì €ì¥ì†Œë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. </li>\n<li>ì—¬ê¸°ì„œ ê°’ì„ ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œë¥¼ í•  ìˆ˜ ìˆë‹¤.\n<img width=\"636\" alt=\"á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-09-04 á„‹á…©á„’á…® 3 10 59\" src=\"https://user-images.githubusercontent.com/63405904/132084874-b28a2e15-6ade-4fec-87a5-87434675f0b4.png\"></li>\n</ul>\n</li>\n<li>ë‹¤ë¥¸ ì‚¬ëŒì´ ì‰½ê²Œ ì—´ëŒí•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ë¯¼ê°í•œ ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ì—†ë‹¤. </li>\n</ul>\n<br>\n<h3 id=\"ì¿ í‚¤-ì„¤ì •í•˜ê¸°\" style=\"position:relative;\"><a href=\"#%EC%BF%A0%ED%82%A4-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"ì¿ í‚¤ ì„¤ì •í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì¿ í‚¤ ì„¤ì •í•˜ê¸°</h3>\n<ul>\n<li>\n<p>ì¿ í‚¤ë¥¼ ì„¤ì •í•˜ê³  ì‹¶ì„ë•ŒëŠ” ì•„ë˜ì™€ ê°™ì´ ì„œë²„ì—ì„œ <code class=\"language-text\">Set-Cookie</code> í—¤ë”ë¡œ ê°’ì„ ë³´ë‚´ë©´ ëœë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">HttpResponse : \n\nHTTP/1.1 302 Found \nSet-Cookie: cookieValue=thisIsCookie!!!\nLocation: http://localhost:8080/index.html </code></pre></div>\n</li>\n<li>\n<p>ê·¸ ì´í›„ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì—ëŠ” ìœ„ì— ì„¤ì •í•œ ì¿ í‚¤ê°’ì´ Cookie í—¤ë”ë¡œ ì„œë²„ì— ì „ì†¡ëœë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">HttpRequest : \n\nGET /login HTTP/1.1\nHost: localhost:8080\nConnection: keep-alive\nPragma: no-cache\nCache-Control: no-cache\nCookie: cookieValue=thisIsCookie!!!</code></pre></div>\n</li>\n</ul>\n<br>\n<br>\n<h2 id=\"session\" style=\"position:relative;\"><a href=\"#session\" aria-label=\"session permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Session</h2>\n<ul>\n<li>ì„¸ì…˜ì€ ì„œë²„ì˜ ë©”ëª¨ë¦¬ì—ì„œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•œë‹¤. </li>\n<li>ì™¸ë¶€ì— ê³µê°œí•˜ê¸° ìœ„í—˜í•œ ì •ë³´ë¥¼ ì„œë²„ì˜ ë©”ëª¨ë¦¬ì— ì•ˆì „í•˜ê²Œ ì €ì¥í•  ìˆ˜ ìˆë‹¤. </li>\n<li>ì„¸ì…˜ì„ ì‹ë³„í•˜ê¸° ìœ„í•œ ê³ ìœ í•œ idì¸ session idê°€ ë¶€ì—¬ë˜ê³  í´ë¼ì´ì–¸íŠ¸ëŠ” í•´ë‹¹ ì„¸ì…˜ Idë§Œì„ ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ë©´ ëœë‹¤. </li>\n<li>ì„¸ì…˜ì— ì €ì¥ë˜ëŠ” ê°’ì˜ í˜•íƒœëŠ” object ì´ë‹¤. </li>\n</ul>\n<h3 id=\"ì„¸ì…˜ì˜-ë‹¨ì \" style=\"position:relative;\"><a href=\"#%EC%84%B8%EC%85%98%EC%9D%98-%EB%8B%A8%EC%A0%90\" aria-label=\"ì„¸ì…˜ì˜ ë‹¨ì  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì„¸ì…˜ì˜ ë‹¨ì </h3>\n<ul>\n<li>ì„œë²„ì˜ ë©”ëª¨ë¦¬ì—ì„œ ì§€ë‚˜ì¹˜ê²Œ ë§ì€ ì„¸ì…˜ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê¸° í˜ë“¤ ìˆ˜ ìˆë‹¤. </li>\n</ul>\n<br>\n<h3 id=\"ì„¸ì…˜-ì„¤ì •í•˜ê¸°\" style=\"position:relative;\"><a href=\"#%EC%84%B8%EC%85%98-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"ì„¸ì…˜ ì„¤ì •í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì„¸ì…˜ ì„¤ì •í•˜ê¸°</h3>\n<ul>\n<li>ì„œë²„ì—ì„œ ì„¸ì…˜ì„ ì„¤ì •í•  ë•Œ <code class=\"language-text\">HttpServletRequest</code>ì˜ <code class=\"language-text\">getSession()</code>ì„ í˜¸ì¶œí•˜ë©´ í•´ë‹¹ requestì˜ ì„¸ì…˜ì„ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤. ì•„ë˜ì— ì„¸ì…˜ ìƒì„± ë° ë°˜í™˜ ì‹œì ì— ëŒ€í•´ì„œ ì¶”ê°€ë¡œ ì„¤ëª…í•œë‹¤. </li>\n<li>ë°˜í™˜ëœ ì„¸ì…˜ì— <code class=\"language-text\">setAttribute()</code>ë¥¼ í†µí•´ ì†ì„±ê°’ì„ ì§€ì •í•œë‹¤. í•´ë‹¹ ê°’ì´ ì„¸ì…˜ì— ì €ì¥ë˜ëŠ” ë°ì´í„° ì •ë³´ì´ë‹¤. </li>\n<li>ì„¸ì…˜ì˜ <code class=\"language-text\">getId()</code>ë¥¼ í˜¸ì¶œí•´ í•´ë‹¹ ì„¸ì…˜ì˜ idë¥¼ <code class=\"language-text\">Set-Cookie</code> í—¤ë”ì— <code class=\"language-text\">JSESSIONID</code> ë¼ëŠ” keyë¡œ ì¶”ê°€í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì‘ë‹µíŒë‹¤. </li>\n<li>ì´í›„ì— ì¿ í‚¤ë¡œ ë“±ë¡ëœ ì„¸ì…˜ idë¥¼ í†µí•´ì„œ ì„¸ì…˜ì„ ìœ ì§€í•˜ê³  ì†ì„±ê°’ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤. </li>\n<li>\n<p><strong>ì½”ë“œë¡œ ë³´ê¸°</strong></p>\n<ul>\n<li>\n<p>ìŠ¤í”„ë§ë¶€íŠ¸ ì›¹ í”„ë¡œì íŠ¸ë¼ê³  ê°€ì •í•œë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/login\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> account<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> password<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token class-name\">User</span> loginUSer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span>account<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">HttpSession</span> session <span class=\"token operator\">=</span> <span class=\"token class-name\">HttpServletRequest</span><span class=\"token punctuation\">.</span><span class=\"token function\">getSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsession<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">,</span> user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">String</span> sessionId <span class=\"token operator\">=</span> session<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">HttpHeaders</span> responseHeaders <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpHeaders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nresponseHeaders<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Set-Cookie\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"JSESSIONID=\"</span> <span class=\"token operator\">+</span> sessionId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nresponseHeaders<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Location\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"index.html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">found</span><span class=\"token punctuation\">(</span>responseHeaders<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>ê·¸ëŸ¼ ë‹¤ìŒê³¼ ê°™ì´ ì‘ë‹µì´ ë‚˜ê°„ë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">HTTPResponse : \n\nHTTP/1.1 302 Found \nSet-Cookie: JSESSIONID=2cfd4acb-0b67-4ce9-90c4-97ee3242e51b \nLocation: http://localhost:8080/index.html </code></pre></div>\n</li>\n<li>\n<p>ì´í›„ í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ì„ ë³´ë‚¼ ë•Œë§ˆë‹¤ ì¿ í‚¤ì— ì„¸ì…˜ ID ê°’ì´ í¬í•¨ë˜ì–´ì„œ ë³´ë‚´ì–´ ì§„ë‹¤. ì´ ì•„ì´ë””ë¥¼ í†µí•´ì„œ ì„¸ì…˜ì„ ë§¤í•‘í•˜ê³  ì„¸ì…˜ì´ ìœ ì§€ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">HTTPRequest : \n\nGET /login HTTP/1.1\nHost: localhost:8080\nConnection: keep-alive\nPragma: no-cache\nCache-Control: no-cache\nCookie: JSESSIONID=2cfd4acb-0b67-4ce9-90c4-97ee3242e51b</code></pre></div>\n</li>\n</ul>\n<br>\n<h3 id=\"ì„¸ì…˜ì€-ì–¸ì œ-ìƒì„±ë ê¹Œ-\" style=\"position:relative;\"><a href=\"#%EC%84%B8%EC%85%98%EC%9D%80-%EC%96%B8%EC%A0%9C-%EC%83%9D%EC%84%B1%EB%90%A0%EA%B9%8C-\" aria-label=\"ì„¸ì…˜ì€ ì–¸ì œ ìƒì„±ë ê¹Œ  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì„¸ì…˜ì€ ì–¸ì œ ìƒì„±ë ê¹Œ ?</h3>\n<ul>\n<li>ì´ë²ˆì— ì§ì ‘ HTTP ì„œë²„ë¥¼ êµ¬í˜„í•˜ëŠ” í”„ë¡œì íŠ¸ë¥¼ í•˜ë©´ì„œ ì„¸ì…˜ì„ êµ¬í˜„í•˜ë©´ì„œ ì˜ë¬¸ì´ ë“¤ì—ˆë‹¤. </li>\n<li><code class=\"language-text\">request.getSession()</code>ì„ í•˜ë©´ í•­ìƒ ì„¸ì…˜ì„ ë°˜í™˜í•˜ëŠ”ë° ê·¸ëŸ¼ ëª¨ë“  HttpRequestì— ëŒ€í•œ ì„¸ì…˜ì´ ìƒì„±ë˜ëŠ” ê²ƒì¸ì§€ ê¶ê¸ˆí–ˆë‹¤. </li>\n<li><code class=\"language-text\">request.getSession()</code>ì„ í•˜ë©´ ìœ ì§€ë˜ë˜ ì„¸ì…˜, í˜¹ì€ ìƒˆë¡œ ìƒì„±ëœ ì„¸ì…˜ì´ ë°˜í™˜ë˜ë¯€ë¡œ ëª¨ë“  ìš”ì²­ì— ëŒ€í•œ ì„¸ì…˜ì„ ìƒì„±í•œë‹¤ê³  ìƒê°í•  ìˆ˜ ìˆì§€ë§Œ ê·¸ë ‡ì§€ ì•Šë‹¤. </li>\n<li>ì„¸ì…˜ì„ ë§Œë“œëŠ” ê²ƒë„ ë¹„ìš©ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ì„¸ì…˜ì´ í•„ìš”í•  ë•Œë§Œ lazy í•˜ê²Œ ìƒì„±í•œë‹¤.\n<br></li>\n<li><code class=\"language-text\">HttpSession</code>ì˜ ê²½ìš° ì„¸ì…˜ì€ ServletContainerì—ì„œ ìƒì„±ì´ ëœë‹¤. </li>\n<li>ë”°ë¼ì„œ <code class=\"language-text\">HttpServletRequest</code>ì—ì„œ ì„¸ì…˜ì„ ìš”ì²­í•  ë•Œ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì—ì„œ ë‚´ë¶€ì ìœ¼ë¡œ ìƒì„±í•´ì„œ ì„¸ì…˜ì„ ë°˜í™˜í•œë‹¤. </li>\n<li>ì‹¤ì œë¡œ ì„¸ì…˜ì´ ìƒì„±ë˜ëŠ” ì‹œê¸°ëŠ” <code class=\"language-text\">@Autowired</code>ë¡œ ì„¸ì…˜ì´ ì£¼ì…ë˜ëŠ”ì§€, ë©”ì„œë“œ ì¸ìë¡œ ì£¼ì…ë˜ëŠ”ì§€, requestì—ì„œ <code class=\"language-text\">getSession()</code>ì„ í˜¸ì¶œí•˜ëŠ” ì§€ì— ë”°ë¼ì„œ ë‹¤ë¥´ë¯€ë¡œ ì°¸ê³ í•˜ì. </li>\n<li>\n<p>ë‚˜ëŠ” ì£¼ë¡œ controller ë©”ì„œë“œì˜ ì¸ìë¡œ ì„¸ì…˜ì„ í˜¸ì¶œí•˜ëŠ”ë° ê·¸ë•ŒëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ì¦‰ì‹œ ì„¸ì…˜ì„ ìƒì„±/ìš”ì²­í•´ì„œ ì£¼ì…í•´ì¤€ë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"login\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ResponseMessage</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">User</span> user<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpSession</span> session<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//..ë¡œì§ ìƒëµ </span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n</li>\n<li>ì„¸ì…˜ì„ ìœ ì§€ í•  ë•ŒëŠ” í—¤ë”ì— ê´€ë ¨ í‚¤ê°€ ìˆë‹¤ë©´(<code class=\"language-text\">JSESSIONID</code>ì™€ ê°™ì€ ì¿ í‚¤ê°’) í•´ë‹¹ ì„¸ì…˜ì„ ìš”ì²­í•´ì„œ ë°˜í™˜í•˜ê³ , ì—†ë‹¤ë©´ ìƒˆë¡œìš´ ì„¸ì…˜ì„ ìƒì„±í•´ì„œ ë°˜í™˜í•œë‹¤. </li>\n</ul>\n<h3 id=\"ì£¼ì˜í• -ì \" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90\" aria-label=\"ì£¼ì˜í•  ì  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì£¼ì˜í•  ì </h3>\n<ul>\n<li>ì„¸ì…˜ì´ ì¿ í‚¤ë³´ë‹¤ ë³´ì•ˆì´ ì¢‹ì€ ê²ƒì€ ì‚¬ì‹¤ì´ë‚˜, ì¿ í‚¤ì— ì €ì¥ëœ <code class=\"language-text\">JSSESIONID</code>ë¥¼ íƒˆì·¨í•˜ì—¬ ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ì˜ ì¿ í‚¤ê°’ìœ¼ë¡œ ì„¤ì •í•œë‹¤ë©´ ì„œë²„ëŠ” ìœ„ ì„¸ì…˜ ì•„ì´ë””ì™€ ë™ì¼í•œ ë¸Œë¼ìš°ì €ë¡œ íŒë‹¨í•´ ìš”ì²­ì„ ì²˜ë¦¬í•œë‹¤. </li>\n<li>ì˜ˆë¥¼ ë“¤ì–´ì„œ A ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•´ì„œ ë¶€ì—¬ë°›ì€ ì„¸ì…˜ IDë¥¼ ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ì˜ ì¿ í‚¤ê°’ìœ¼ë¡œ ì§‘ì–´ë„£ê¸°ë§Œ í•´ë„ A ì‚¬ìš©ìê°€ ë¡œê·¸ì¸í•œ ìƒíƒœë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒìœ¼ë¡œ ì²˜ë¦¬ë˜ë¯€ë¡œ ì—¬ì „íˆ ìœ„í—˜í•  ìˆ˜ ìˆë‹¤. </li>\n</ul>\n<br>\n<br>\n<h2 id=\"ì–¸ì œ-ë¬´ì—‡ì„-ì‚¬ìš©í•˜ëŠ”-ê²ƒì´-ì¢‹ì„ê¹Œ\" style=\"position:relative;\"><a href=\"#%EC%96%B8%EC%A0%9C-%EB%AC%B4%EC%97%87%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EA%B2%83%EC%9D%B4-%EC%A2%8B%EC%9D%84%EA%B9%8C\" aria-label=\"ì–¸ì œ ë¬´ì—‡ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì–¸ì œ ë¬´ì—‡ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ?</h2>\n<ul>\n<li>ì–¸ì œ ì„¸ì…˜ì„ ì‚¬ìš©í•˜ê³  ì–¸ì œ ì¿ í‚¤ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œëŠ” ë¬¼ë¡  ë‹µì´ ì—†ë‹¤. </li>\n<li>ì›¹ì„ êµ¬í˜„í•˜ë©´ì„œ ì›Œë‚™ ë§ì€ ê²½ìš°ê°€ ìˆê¸° ë•Œë¬¸ì— ê°ê° ë‹¤ë¥¸ ì´ìœ ë“¤ì„ ë¹„êµí•´ì„œ ë” ì í•©í•œ ê²ƒì„ ì„ íƒí•˜ë©´ ëœë‹¤. </li>\n<li>ë‚˜ì˜ ê²½ìš°ì—ëŠ” ë¯¼ê°í•œ ì •ë³´ê°€ ìˆì„ ë•ŒëŠ” ì„¸ì…˜ì„, ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°ëŠ” ì¿ í‚¤ë¡œ ê´€ë¦¬í•œë‹¤.</li>\n</ul>\n<br>\n<br>\n<h2 id=\"ë²ˆì™¸-static-code-classlanguage-texthttpsessionscode-í´ë˜ìŠ¤-í…ŒìŠ¤íŠ¸í•˜ê¸°-code-classlanguage-textmockstaticltcode\" style=\"position:relative;\"><a href=\"#%EB%B2%88%EC%99%B8-static-code-classlanguage-texthttpsessionscode-%ED%81%B4%EB%9E%98%EC%8A%A4-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0-code-classlanguage-textmockstaticltcode\" aria-label=\"ë²ˆì™¸ static code classlanguage texthttpsessionscode í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸í•˜ê¸° code classlanguage textmockstaticltcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë²ˆì™¸) static <code class=\"language-text\">HttpSessions</code> í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸í•˜ê¸° <code class=\"language-text\">MockStatic&lt;></code></h2>\n<ul>\n<li>ì§ì ‘ Http ì„œë²„ë¥¼ êµ¬í˜„í•˜ë©´ì„œ ì„¸ì…˜ì— ê³ ìœ í•œ idë¥¼ ë¶€ì—¬í•˜ê¸° ìœ„í•´ <code class=\"language-text\">UUID.randomUUID()</code>ë¥¼ í†µí•´ì„œ êµ¬í˜„í–ˆë‹¤. </li>\n<li><code class=\"language-text\">HttpSession</code> ì„ ê´€ë¦¬í•˜ëŠ” <code class=\"language-text\">HttpSessions</code>ëŠ” <code class=\"language-text\">static</code>ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ìˆê³ , í•´ë‹¹ í´ë˜ìŠ¤ì—ì„œ <code class=\"language-text\">UUID.randomUUID()</code>ë¥¼ ì‚¬ìš©í•´ ìƒˆë¡œìš´ HttpSessionì„ ìƒì„±í•˜ê³  ì•„ì´ë””ë¥¼ ë¶€ì—¬í•´ ë¦¬í„´ ë° ì €ì¥í•œë‹¤. </li>\n<li>ë§¤ë²ˆ ëœë¤í•œ ê°’ì„ idë¡œ ë¶€ì—¬í•˜ê¸° ë•Œë¬¸ì— í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì§œëŠ”ë° ì–´ë ¤ì›€ì´ ìˆì—ˆê³ , Mockingì„ í•˜ë ¤ê³  í–ˆìœ¼ë‚˜ HttpSessionsê°€ staticì´ë¯€ë¡œ ê¸°ì¡´ì˜ ëª¨í‚¹ ë°©ì‹ìœ¼ë¡œëŠ” í…ŒìŠ¤íŠ¸í•˜ê¸°ê°€ ì–´ë ¤ì› ë‹¤. </li>\n<li>\n<p>ë”°ë¼ì„œ static ì„ ëª¨í‚¹í•  ìˆ˜ ìˆëŠ” ë°©ë²•ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í–ˆë‹¤. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">MockedStatic</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">HttpSessions</span><span class=\"token punctuation\">></span></span> mockHttpSessions<span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">String</span> sessionId <span class=\"token operator\">=</span> <span class=\"token string\">\"id\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">when</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpSessions</span><span class=\"token punctuation\">.</span><span class=\"token function\">getSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">thenReturn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpSession</span><span class=\"token punctuation\">(</span>sessionId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n<br>\n<br>\n<br>\n<p><strong>[ì°¸ê³ ìë£Œ]</strong></p>\n<ul>\n<li><a href=\"https://hahahoho5915.tistory.com/32\">https://hahahoho5915.tistory.com/32</a></li>\n<li><a href=\"https://soon-devblog.tistory.com/2\">https://soon-devblog.tistory.com/2</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=OpoVuwxGRDI\">https://www.youtube.com/watch?v=OpoVuwxGRDI</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#intro\">INTRO</a></li>\n<li>\n<p><a href=\"#cookie\">Cookie</a></p>\n<ul>\n<li><a href=\"#%EC%BF%A0%ED%82%A4%EC%9D%98-%EB%8B%A8%EC%A0%90\">ì¿ í‚¤ì˜ ë‹¨ì </a></li>\n<li><a href=\"#%EC%BF%A0%ED%82%A4-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\">ì¿ í‚¤ ì„¤ì •í•˜ê¸°</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#session\">Session</a></p>\n<ul>\n<li><a href=\"#%EC%84%B8%EC%85%98%EC%9D%98-%EB%8B%A8%EC%A0%90\">ì„¸ì…˜ì˜ ë‹¨ì </a></li>\n<li><a href=\"#%EC%84%B8%EC%85%98-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\">ì„¸ì…˜ ì„¤ì •í•˜ê¸°</a></li>\n<li><a href=\"#%EC%84%B8%EC%85%98%EC%9D%80-%EC%96%B8%EC%A0%9C-%EC%83%9D%EC%84%B1%EB%90%A0%EA%B9%8C-\">ì„¸ì…˜ì€ ì–¸ì œ ìƒì„±ë ê¹Œ ?</a></li>\n<li><a href=\"#%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90\">ì£¼ì˜í•  ì </a></li>\n</ul>\n</li>\n<li><a href=\"#%EC%96%B8%EC%A0%9C-%EB%AC%B4%EC%97%87%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EA%B2%83%EC%9D%B4-%EC%A2%8B%EC%9D%84%EA%B9%8C\">ì–¸ì œ ë¬´ì—‡ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ?</a></li>\n<li><a href=\"#%EB%B2%88%EC%99%B8-static-httpsessions-%ED%81%B4%EB%9E%98%EC%8A%A4-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0-mockstatic\">ë²ˆì™¸) static <code class=\"language-text\">HttpSessions</code> í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸í•˜ê¸° <code class=\"language-text\">MockStatic&lt;></code></a></li>\n</ul>\n</div>","frontmatter":{"date":"September 04, 2021","title":"ì¿ í‚¤ì™€ ì„¸ì…˜ ì•Œì•„ë³´ê¸°","categories":"ì›¹ ìŠ¤í”„ë§ë¶€íŠ¸","author":"ì½”ë‹¤","emoji":"ğŸ–¥"},"fields":{"slug":"/cookie-session/"}},"site":{"siteMetadata":{"siteUrl":"https://yjksw.github.io","comments":{"utterances":{"repo":"yjksw/yjksw.github.io"}}}}},"pageContext":{"slug":"/cdn/","nextSlug":"/jpa-query-bug/","prevSlug":"/cookie-session/"}},"staticQueryHashes":["1073350324","2938748437"]}