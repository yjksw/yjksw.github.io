{"componentChunkName":"component---src-templates-blog-template-js","path":"/annotation-valid/","result":{"data":{"cur":{"id":"a1fc154b-ec1d-5302-b815-b48084f79b36","html":"<p><strong>@Valid</strong> - 스프링 부트에서 어노테이션으로 validation을 할 수 있도록 기능을 추가해주는 것. 즉, controller에서 인자를 받을 때 유효성 검사를 할 수 있도록 해주는 것이다. </p>\n<p>DTO의 필드나, 도메인 객체의 필드 위에 유효성 검사를 하고 싶은 어노테이션을 추가하고, controller의 인자 앞에 <strong>@Valid</strong> 를 추가해서 붙여준다. </p>\n<h2 id=\"javavalidation-어노테이션\" style=\"position:relative;\"><a href=\"#javavalidation-%EC%96%B4%EB%85%B8%ED%85%8C%EC%9D%B4%EC%85%98\" aria-label=\"javavalidation 어노테이션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>java.validation 어노테이션</h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@NotNull</span>\n\n<span class=\"token annotation punctuation\">@Null</span>\n\n<span class=\"token annotation punctuation\">@NotEmpty</span>\n\n<span class=\"token annotation punctuation\">@NotBlank</span> \n\n<span class=\"token annotation punctuation\">@Size</span><span class=\"token punctuation\">(</span>min<span class=\"token operator\">=</span><span class=\"token punctuation\">,</span> max<span class=\"token operator\">=</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token annotation punctuation\">@Pattern</span><span class=\"token punctuation\">(</span>regex<span class=\"token operator\">=</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> 정규식 만족\n\n<span class=\"token annotation punctuation\">@Max</span><span class=\"token punctuation\">(</span>숫자<span class=\"token punctuation\">)</span> \n\n<span class=\"token annotation punctuation\">@Min</span><span class=\"token punctuation\">(</span>숫자<span class=\"token punctuation\">)</span> \n\n<span class=\"token annotation punctuation\">@Positive</span>\n\n<span class=\"token annotation punctuation\">@PositiveOrZero</span>\n\n<span class=\"token annotation punctuation\">@Negative</span>\n\n<span class=\"token annotation punctuation\">@NegativeOrZero</span>\n\n<span class=\"token annotation punctuation\">@Email</span>\n\n<span class=\"token annotation punctuation\">@Digits</span><span class=\"token punctuation\">(</span>integer<span class=\"token operator\">=</span><span class=\"token punctuation\">,</span> fraction<span class=\"token operator\">=</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> 대상 수가 지정된 정수와 소수 자리수보다 작은가<span class=\"token operator\">?</span> \n\n<span class=\"token annotation punctuation\">@DecimalMax</span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">=</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token annotation punctuation\">@DecimalMin</span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">=</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token annotation punctuation\">@AssertFalse</span>\n\n<span class=\"token annotation punctuation\">@AssertTrue</span></code></pre></div>\n<h3 id=\"사용-예시\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C\" aria-label=\"사용 예시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용 예시</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span>\n\t\n\t<span class=\"token annotation punctuation\">@NotNull</span><span class=\"token punctuation\">(</span>message<span class=\"token operator\">=</span> <span class=\"token string\">\"id는 필수 값입니다.\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token annotation punctuation\">@Size</span><span class=\"token punctuation\">(</span>min <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> max <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> id<span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token annotation punctuation\">@Max</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span> message <span class=\"token operator\">=</span> <span class=\"token string\">\"25세 이하만 가능합니다\"</span><span class=\"token punctuation\">)</span> \n\t<span class=\"token annotation punctuation\">@Min</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> message <span class=\"token operator\">=</span> <span class=\"token string\">\"18세 이상만 가능합니다\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> age<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token annotation punctuation\">@Pattern</span><span class=\"token punctuation\">(</span>regxp <span class=\"token operator\">=</span> <span class=\"token string\">\"...\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> email<span class=\"token punctuation\">;</span></code></pre></div>","excerpt":"@Valid - 스프링 부트에서 어노테이션으로 validation을 할 수 있도록 기능을 추가해주는 것. 즉, controller에서 인자를 받을 때 유효성 검사를 할 수 있도록 해주는 것이다.  DTO의 필드나, 도메인 객체의 필드 위에 유효성 검사를 하고 싶은 어노테이션을 추가하고, controller의 인자 앞에 @Valid 를 추가해서 붙여준다.  java.validation 어노테이션 사용 예시","frontmatter":{"date":"May 24, 2021","title":"@Valid 어노테이션 초간단 입문","categories":"스프링부트","author":"코다","emoji":"🖥"},"fields":{"slug":"/annotation-valid/"}},"next":{"id":"36216a08-7f3b-5fae-a020-c6ecb5db3d3e","html":"<h2 id=\"자바--스프링-mvc-프로젝트-배포과정-별도-인스턴스-활용\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EB%B0%94--%EC%8A%A4%ED%94%84%EB%A7%81-mvc-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EB%B0%B0%ED%8F%AC%EA%B3%BC%EC%A0%95-%EB%B3%84%EB%8F%84-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%ED%99%9C%EC%9A%A9\" aria-label=\"자바  스프링 mvc 프로젝트 배포과정 별도 인스턴스 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자바 + 스프링 MVC 프로젝트 배포과정 (별도 인스턴스 활용)</h2>\n<ul>\n<li>이번에 몇몇 크루들과 미션을 진행하면서 웹을 처음으로 호스팅 해보았다. 웹을 배포 할 때 더욱 편리하다는 DevOps의 꽃 ci/cd를 학습해보기 위해서 6명이 모여서 한번 적용해보았다. 적용하면서 밟은 단계들을 기록해둔다. </li>\n<li>아래와 같이 그대로 적용하다가 본 프로젝트에 맞게 어느정도 커스텀하여 다르게 설정한 것도 있다. 특히 버전같은 것들은 좀 outdated 된 정보일 수 있다. </li>\n<li>추후에 진행할 팀 프로젝트에 큰 도움이 될 것 같다. </li>\n</ul>\n<h3 id=\"docker-설치\" style=\"position:relative;\"><a href=\"#docker-%EC%84%A4%EC%B9%98\" aria-label=\"docker 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>docker 설치</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">sudo apt<span class=\"token operator\">-</span>get update <span class=\"token operator\">&amp;&amp;</span> \\\nsudo apt<span class=\"token operator\">-</span>get install <span class=\"token operator\">-</span>y apt<span class=\"token operator\">-</span>transport<span class=\"token operator\">-</span>https ca<span class=\"token operator\">-</span>certificates curl software<span class=\"token operator\">-</span>properties<span class=\"token operator\">-</span>common <span class=\"token operator\">&amp;&amp;</span> \\\ncurl <span class=\"token operator\">-</span>fsSL https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>download<span class=\"token punctuation\">.</span>docker<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>linux<span class=\"token operator\">/</span>ubuntu<span class=\"token operator\">/</span>gpg <span class=\"token operator\">|</span> sudo apt<span class=\"token operator\">-</span>key add <span class=\"token operator\">-</span> <span class=\"token operator\">&amp;&amp;</span> \\\nsudo apt<span class=\"token operator\">-</span>key fingerprint <span class=\"token number\">0</span>EBFCD88 <span class=\"token operator\">&amp;&amp;</span> \\\nsudo add<span class=\"token operator\">-</span>apt<span class=\"token operator\">-</span>repository <span class=\"token string\">\"deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\"</span> <span class=\"token operator\">&amp;&amp;</span> \\\nsudo apt<span class=\"token operator\">-</span>get update <span class=\"token operator\">&amp;&amp;</span> \\\nsudo apt<span class=\"token operator\">-</span>get install <span class=\"token operator\">-</span>y docker<span class=\"token operator\">-</span>ce <span class=\"token operator\">&amp;&amp;</span> \\\nsudo usermod <span class=\"token operator\">-</span>aG docker ubuntu <span class=\"token operator\">&amp;&amp;</span> \\\nsudo curl <span class=\"token operator\">-</span><span class=\"token class-name\">L</span> <span class=\"token string\">\"https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)\"</span> <span class=\"token operator\">-</span>o <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>docker<span class=\"token operator\">-</span>compose <span class=\"token operator\">&amp;&amp;</span> \\\nsudo chmod <span class=\"token operator\">+</span>x <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>docker<span class=\"token operator\">-</span>compose <span class=\"token operator\">&amp;&amp;</span> \\\nsudo ln <span class=\"token operator\">-</span>s <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>local<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>docker<span class=\"token operator\">-</span>compose <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>docker<span class=\"token operator\">-</span>compose</code></pre></div>\n<h3 id=\"ec2에서-jenkins-key-받기-및-적용\" style=\"position:relative;\"><a href=\"#ec2%EC%97%90%EC%84%9C-jenkins-key-%EB%B0%9B%EA%B8%B0-%EB%B0%8F-%EC%A0%81%EC%9A%A9\" aria-label=\"ec2에서 jenkins key 받기 및 적용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EC2에서 Jenkins key 받기 및 적용</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">$ sudo wget <span class=\"token operator\">-</span>q <span class=\"token operator\">-</span><span class=\"token class-name\">O</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">[</span>https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>pkg<span class=\"token punctuation\">.</span>jenkins<span class=\"token punctuation\">.</span>io<span class=\"token operator\">/</span>debian<span class=\"token operator\">/</span>jenkins<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>https<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>pkg<span class=\"token punctuation\">.</span>jenkins<span class=\"token punctuation\">.</span>io<span class=\"token operator\">/</span>debian<span class=\"token operator\">/</span>jenkins<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> sudo apt<span class=\"token operator\">-</span>key add <span class=\"token operator\">-</span>\n\n$ sudo sh <span class=\"token operator\">-</span>c <span class=\"token string\">'echo deb http://pkg.jenkins-ci.org/debian binary/ > /etc/apt/sources.list.d/jenkins.list'</span>\n\n$ sudo apt update\n\n$ sudo apt install jenkins\n\n<span class=\"token comment\">//실행중 확인</span>\n$ systemctl status jenkins</code></pre></div>\n<h3 id=\"jenkins-포트-번호-변경\" style=\"position:relative;\"><a href=\"#jenkins-%ED%8F%AC%ED%8A%B8-%EB%B2%88%ED%98%B8-%EB%B3%80%EA%B2%BD\" aria-label=\"jenkins 포트 번호 변경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jenkins 포트 번호 변경</h3>\n<p>젠킨스는 내부적으로 톰캣 서버를 이용하므로 기본포트 8080을 이용한다. 대부분의 스프링 프로젝트도 8080 톰캣 포트를 이용하기 때문에 젠킨스의 포트번호를 변경해야한다. </p>\n<ul>\n<li>\n<p>Jenkins 홈 디렉토리</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">$ cd <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>lib<span class=\"token operator\">/</span>jenkins</code></pre></div>\n</li>\n<li>\n<p>Jenkins 기본 설정파일 &#x26; 로그 파일</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">//기본 설정 파일 </span>\n<span class=\"token comment\">//여기서 포트번호 변경</span>\n$ cd <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span><span class=\"token keyword\">default</span><span class=\"token operator\">/</span>jenkins\n\n<span class=\"token comment\">//로그파일</span>\n$ cd <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log<span class=\"token operator\">/</span>jenkins<span class=\"token operator\">/</span>jenkins<span class=\"token punctuation\">.</span>log</code></pre></div>\n</li>\n<li>\n<p>포트 변경 후 재시작</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">$ sudo systemctl restart jenkins</code></pre></div>\n</li>\n</ul>\n<h3 id=\"jenkins-접속-및-설정\" style=\"position:relative;\"><a href=\"#jenkins-%EC%A0%91%EC%86%8D-%EB%B0%8F-%EC%84%A4%EC%A0%95\" aria-label=\"jenkins 접속 및 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jenkins 접속 및 설정</h3>\n<ul>\n<li>\n<p>Jenkins 접속</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">서버IP<span class=\"token operator\">:</span>변경포트번호</code></pre></div>\n</li>\n<li>\n<p>암호 가져오기</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">$ sudo docker exec jenkins cat <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>jenkins_home<span class=\"token operator\">/</span>secrets<span class=\"token operator\">/</span>initialAdminPassword</code></pre></div>\n<ul>\n<li>해당 암호를 접속한 Jenkins에 입력</li>\n</ul>\n</li>\n<li>Install suggested plugins 로 추천 플러그인 설치</li>\n<li>어드민 계정 생성</li>\n<li>\n<p>플러그인 설치</p>\n<ul>\n<li><code class=\"language-text\">Deploy to Container</code> - 배포 후 빌드 파일 container에 배치</li>\n<li><code class=\"language-text\">Public Over SSH</code> - ssh로 빌드파일 전송</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"jenkins-key-생성\" style=\"position:relative;\"><a href=\"#jenkins-key-%EC%83%9D%EC%84%B1\" aria-label=\"jenkins key 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jenkins Key 생성</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">//유저 변경 &amp; 홈 디렉토리로 이동 </span>\n$ sudo su jenkins <span class=\"token operator\">&amp;&amp;</span> cd \n\n<span class=\"token comment\">//키 생성</span>\n$ ssh<span class=\"token operator\">-</span>keygen <span class=\"token operator\">-</span>t rsa </code></pre></div>\n<p>→ 배포용 어플리케이션(톰캣?)의 키도 생성해야함 </p>\n<h3 id=\"ssh-key-교환\" style=\"position:relative;\"><a href=\"#ssh-key-%EA%B5%90%ED%99%98\" aria-label=\"ssh key 교환 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSH KEY 교환</h3>\n<ul>\n<li>\n<p>Jenkins 인스턴스에서 유저 변경후 public ssh key 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> <span class=\"token function\">su</span> jenkins\n$ <span class=\"token builtin class-name\">cd</span>\n$ .ssh/id_rsa.pub</code></pre></div>\n</li>\n<li>\n<p>Jenkins의 public ssh key 를 tomcat (배포서버) 에 저장</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">//배포 서버에 키 복사\n$ <span class=\"token function\">vi</span> .ssh/authorized_keys</code></pre></div>\n</li>\n</ul>\n<h3 id=\"jenkins-시스템-설정\" style=\"position:relative;\"><a href=\"#jenkins-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EC%A0%95\" aria-label=\"jenkins 시스템 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jenkins 시스템 설정</h3>\n<ul>\n<li>Publish over SSH → Path to key : jekins private ssh key 경로 기입</li>\n<li>SSH Servers → Application Server 주소, user name, remote directory 경로 기입</li>\n</ul>\n<h3 id=\"global-tool-설정\" style=\"position:relative;\"><a href=\"#global-tool-%EC%84%A4%EC%A0%95\" aria-label=\"global tool 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Global Tool 설정</h3>\n<ul>\n<li>JDK 경로 기입</li>\n</ul>\n<h3 id=\"jenkins-프로젝트-생성-→-github-연동\" style=\"position:relative;\"><a href=\"#jenkins-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1-%E2%86%92-github-%EC%97%B0%EB%8F%99\" aria-label=\"jenkins 프로젝트 생성 → github 연동 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jenkins 프로젝트 생성 → Github 연동</h3>\n<ul>\n<li>Jenkins 에 Github 프로젝트 추가하고 Credentials 추가</li>\n<li>Jenkins에서 배포 버튼을 누르면 빌드, 배포가 이루어짐</li>\n</ul>\n<h2 id=\"docker--jenkins-배포-과정\" style=\"position:relative;\"><a href=\"#docker--jenkins-%EB%B0%B0%ED%8F%AC-%EA%B3%BC%EC%A0%95\" aria-label=\"docker  jenkins 배포 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Docker + Jenkins 배포 과정</h2>\n<h3 id=\"docker-에서-jenkins-이미지-받기-및-컨테이너-실행\" style=\"position:relative;\"><a href=\"#docker-%EC%97%90%EC%84%9C-jenkins-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%B0%9B%EA%B8%B0-%EB%B0%8F-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%8B%A4%ED%96%89\" aria-label=\"docker 에서 jenkins 이미지 받기 및 컨테이너 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Docker 에서 Jenkins 이미지 받기 및 컨테이너 실행</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">//이미지 받기\n$ <span class=\"token function\">sudo</span> docker pull jenkins/jenkins:버전\n\n//이미지 확인\n$ <span class=\"token function\">sudo</span> docker images\n\n//컨테이너 실행\n$ <span class=\"token function\">sudo</span> docker run -d -p <span class=\"token number\">8181</span>:8080 -v /jenkins:/var/jenkins_home --name jm_jenkins -u root jenkins/jenkins:버전</code></pre></div>\n<ul>\n<li>-d : 도커 백그라운드 모드</li>\n<li>-p : 호스트와 컨테이너의 포트 연결 (포워딩)</li>\n<li>-v : 호스트와 컨테이너 디렉토리 연결 (마운트)</li>\n<li>—name : 컨테이너 이름 설정</li>\n<li>-u : 사용자 지정</li>\n</ul>\n<h3 id=\"ip와-포트로-jenkins-브라우저-접속-및-admin-생성\" style=\"position:relative;\"><a href=\"#ip%EC%99%80-%ED%8F%AC%ED%8A%B8%EB%A1%9C-jenkins-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EC%A0%91%EC%86%8D-%EB%B0%8F-admin-%EC%83%9D%EC%84%B1\" aria-label=\"ip와 포트로 jenkins 브라우저 접속 및 admin 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IP와 포트로 Jenkins 브라우저 접속 및 admin 생성</h3>\n<ul>\n<li>\n<p>비밀번호 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">sudo</span> docker logs jenkins</code></pre></div>\n</li>\n</ul>\n<h3 id=\"플러그인-설치\" style=\"position:relative;\"><a href=\"#%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98\" aria-label=\"플러그인 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>플러그인 설치</h3>\n<ul>\n<li>위와 동일</li>\n</ul>\n<h3 id=\"github-연결\" style=\"position:relative;\"><a href=\"#github-%EC%97%B0%EA%B2%B0\" aria-label=\"github 연결 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Github 연결</h3>\n<ul>\n<li>Jenkins 브라우저에서 새로운 Item → Freestyle project</li>\n<li>레포지토리 URL 입력</li>\n<li>\n<p>Credentials 추가</p>\n<ul>\n<li>\n<p>Kind → username with password (테스트용)</p>\n<ul>\n<li>계정 이름 및 비밀번호 입력</li>\n</ul>\n</li>\n<li>Kind → 실재로는 SSH 연동을 많이 사용한다. 해당 내용은 아래에 기입.</li>\n</ul>\n</li>\n<li>\n<p>Branch Specifier 추가</p>\n<ul>\n<li>ex. <code class=\"language-text\">*/master</code></li>\n</ul>\n</li>\n<li>Builder Trigger → Github hook trigger</li>\n<li>\n<p>Build → execute shell</p>\n<ul>\n<li>push 시 실행하도록 등록</li>\n<li>shell 스크립트 작성 필요 *</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"jenkins-github-ssh-연동\" style=\"position:relative;\"><a href=\"#jenkins-github-ssh-%EC%97%B0%EB%8F%99\" aria-label=\"jenkins github ssh 연동 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Jenkins Github SSH 연동</h3>\n<ul>\n<li>\n<p>현재 사용자 확인</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">ps</span> aux <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> jenkins</code></pre></div>\n</li>\n<li>\n<p>사용자 전환</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">//jnkins가 서버에 등록된 사용자가 아닌 경우가 많으므로 <span class=\"token function\">su</span> -u 로 전환이 안될 수 있는 것 참고 \n$ <span class=\"token function\">sudo</span> -u jenkins /bin/bash</code></pre></div>\n</li>\n<li>\n<p>.ssh 디렉토리 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">mkdir</span> /var/lib/jenkins/.ssh\n$ <span class=\"token builtin class-name\">cd</span> /var/lib/jenkins/.ssh</code></pre></div>\n</li>\n<li>\n<p>ssh 키 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ ssh-keygen -t rsa -f /var/lib/jenkins/.ssh/github_ansible-in-action\n\n//비밀키, 공개키 생성 확인 \n$ <span class=\"token function\">ls</span> -al </code></pre></div>\n</li>\n<li>\n<p>Github 설정 - 공개키 등록</p>\n<ul>\n<li>\n<p>Settings → Deploy keys → add deploy key → 공개키 복붙</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">cat</span> /var/lib/jenkins/.ssh/github_ansible-in-action.pub</code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>Jenkins 브라우저에 비밀키 등록</p>\n<ul>\n<li>\n<p>Credentials → System → Global credentials → Add credentials → 비밀키 복붙</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">cat</span> /var/lib/jenkins/.ssh/github_ansible-in-action</code></pre></div>\n</li>\n<li>\n<p>Kind → SSH Username with private key</p>\n<p>Username → github_ansible-in-action(Job에서 보여줄 인증키 이름이므로 원하는 것 설정)</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"github-설정\" style=\"position:relative;\"><a href=\"#github-%EC%84%A4%EC%A0%95\" aria-label=\"github 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Github 설정</h3>\n<ul>\n<li>\n<p>Setting → Integration &#x26; Services → Add Service → Jenkins hook url → Jenkins 주소 입력</p>\n<ul>\n<li>주소 뒤에 <code class=\"language-text\">/github-webhook/</code> 추가</li>\n</ul>\n</li>\n</ul>\n<p>⇒ 슬랙 연동도 가능</p>\n<br>\n<br>\n<p><strong>[참고링크]</strong></p>\n<ul>\n<li><a href=\"https://jojoldu.tistory.com/139\">https://jojoldu.tistory.com/139</a></li>\n<li><a href=\"https://jojoldu.tistory.com/442\">https://jojoldu.tistory.com/442</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%9E%90%EB%B0%94--%EC%8A%A4%ED%94%84%EB%A7%81-mvc-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EB%B0%B0%ED%8F%AC%EA%B3%BC%EC%A0%95-%EB%B3%84%EB%8F%84-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%ED%99%9C%EC%9A%A9\">자바 + 스프링 MVC 프로젝트 배포과정 (별도 인스턴스 활용)</a></p>\n<ul>\n<li><a href=\"#docker-%EC%84%A4%EC%B9%98\">docker 설치</a></li>\n<li><a href=\"#ec2%EC%97%90%EC%84%9C-jenkins-key-%EB%B0%9B%EA%B8%B0-%EB%B0%8F-%EC%A0%81%EC%9A%A9\">EC2에서 Jenkins key 받기 및 적용</a></li>\n<li><a href=\"#jenkins-%ED%8F%AC%ED%8A%B8-%EB%B2%88%ED%98%B8-%EB%B3%80%EA%B2%BD\">Jenkins 포트 번호 변경</a></li>\n<li><a href=\"#jenkins-%EC%A0%91%EC%86%8D-%EB%B0%8F-%EC%84%A4%EC%A0%95\">Jenkins 접속 및 설정</a></li>\n<li><a href=\"#jenkins-key-%EC%83%9D%EC%84%B1\">Jenkins Key 생성</a></li>\n<li><a href=\"#ssh-key-%EA%B5%90%ED%99%98\">SSH KEY 교환</a></li>\n<li><a href=\"#jenkins-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%A4%EC%A0%95\">Jenkins 시스템 설정</a></li>\n<li><a href=\"#global-tool-%EC%84%A4%EC%A0%95\">Global Tool 설정</a></li>\n<li><a href=\"#jenkins-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1-%E2%86%92-github-%EC%97%B0%EB%8F%99\">Jenkins 프로젝트 생성 → Github 연동</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#docker--jenkins-%EB%B0%B0%ED%8F%AC-%EA%B3%BC%EC%A0%95\">Docker + Jenkins 배포 과정</a></p>\n<ul>\n<li><a href=\"#docker-%EC%97%90%EC%84%9C-jenkins-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%B0%9B%EA%B8%B0-%EB%B0%8F-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%8B%A4%ED%96%89\">Docker 에서 Jenkins 이미지 받기 및 컨테이너 실행</a></li>\n<li><a href=\"#ip%EC%99%80-%ED%8F%AC%ED%8A%B8%EB%A1%9C-jenkins-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EC%A0%91%EC%86%8D-%EB%B0%8F-admin-%EC%83%9D%EC%84%B1\">IP와 포트로 Jenkins 브라우저 접속 및 admin 생성</a></li>\n<li><a href=\"#%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98\">플러그인 설치</a></li>\n<li><a href=\"#github-%EC%97%B0%EA%B2%B0\">Github 연결</a></li>\n<li><a href=\"#jenkins-github-ssh-%EC%97%B0%EB%8F%99\">Jenkins Github SSH 연동</a></li>\n<li><a href=\"#github-%EC%84%A4%EC%A0%95\">Github 설정</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"May 19, 2021","title":"젠킨스를 활용한 CI/CD 적용기","categories":"웹 운영","author":"코다","emoji":"🖥"},"fields":{"slug":"/cicd-jenkins/"}},"prev":{"id":"0c475bf4-622e-52db-93a0-041e112f245b","html":"<p>스프링 프레임워크에서 사용되는 Bean scope에 6가지 종류가 있다. 일반적으로 많이 쓰이는 scope은 싱글톤이다. </p>\n<h2 id=\"singleton-scope\" style=\"position:relative;\"><a href=\"#singleton-scope\" aria-label=\"singleton scope permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Singleton scope</h2>\n<p>스프링 빈이 singleton scope을 가지고 있다면, 컨테이너가 빈의 단 하나의 인스턴스를 해당 빈이 필요할 때마다 캐싱된 빈을 리턴한다. 빈 객체를 수정하면 해당 빈을 참조하고 있는 모든 곳에 반영이 된다. 싱글톤 스콥은 스프링의 기본값이다. </p>\n<h2 id=\"prototype-scope\" style=\"position:relative;\"><a href=\"#prototype-scope\" aria-label=\"prototype scope permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prototype scope</h2>\n<p> 프로토타입 스콥은 빈 요청이 있을때마다 매번 다른 인스턴스를 컨테이너로부터 반환한다. 설정방법은 다음과 같다. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Bean</span>\n<span class=\"token annotation punctuation\">@Scope</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"prototype\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">Persion</span> <span class=\"token function\">personPrototype</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Person</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"web-aware-scopes\" style=\"position:relative;\"><a href=\"#web-aware-scopes\" aria-label=\"web aware scopes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Web Aware Scopes</h2>\n<p>앞에 두 개의 범위를 제외하고 4개의 범위가 더 존재한다. 하지만 조건이 있는데, web-aware application 맥락에서만 적용이 될 수 있는 범위이다. </p>\n<h3 id=\"request-scope\" style=\"position:relative;\"><a href=\"#request-scope\" aria-label=\"request scope permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Request Scope</h3>\n<p>Request scope은 하나의 HTTP request 당 하나의 빈을 생성한다. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Bean</span>\n<span class=\"token annotation punctuation\">@Scope</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token class-name\">WebApplicationContext</span><span class=\"token punctuation\">.</span>SCOPE_REQUEST<span class=\"token punctuation\">,</span> proxyMode <span class=\"token operator\">=</span> <span class=\"token class-name\">ScopedProxyMode</span><span class=\"token punctuation\">.</span>TARGET_CLASS<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">HelloMessageGenerator</span> <span class=\"token function\">requestScopedBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HelloMessageGenerator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 scope을 사용할 때는 proxyMode 속성이 필수로 필요하다. 왜냐하면 웹 어플리케이션 context가 시작하는 그 순간에는 활성화 되어 있는 request 가 없기 때문에 proxy 객체가 필요하다. 스프링이 시작되었을 때 프록시 객체가 주입된다. 그리고 해당 빈이 필요한 request가 왔을 때 대상 bean을 초기화하고 주입한다. </p>\n<p>더 간단하게는 아래와 같이 표현이 가능하다. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Bean</span>\n<span class=\"token annotation punctuation\">@RequestScope</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">HelloMessageGenerator</span> <span class=\"token function\">requestScopedBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HelloMessageGenerator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 컨트롤러에서 requestScopedBean을 정의해서 사용할 수 있다. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Controller</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ScopesController</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token annotation punctuation\">@Resource</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"requestScopedBean\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token class-name\">HelloMessageGenerator</span> requestScopedBean<span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/scopes/request\"</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getRequestScopeMessage</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Model</span> model<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tmodel<span class=\"token punctuation\">.</span><span class=\"token function\">addAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"previousMessage\"</span><span class=\"token punctuation\">,</span> requestScopedBean<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//이 메세지가 항상 null이 된다.</span>\n\t\trequestScopedBean<span class=\"token punctuation\">.</span><span class=\"token function\">setMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Good Morning!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmodel<span class=\"token punctuation\">.</span><span class=\"token function\">addAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"currentMessage\"</span><span class=\"token punctuation\">,</span> requestScopedBean<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token string\">\"scopeExample\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"session-scope\" style=\"position:relative;\"><a href=\"#session-scope\" aria-label=\"session scope permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Session Scope</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Bean</span>\n<span class=\"token annotation punctuation\">@Scope</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token class-name\">WebApplicationContext</span><span class=\"token punctuation\">.</span>SCOPE_SESSION<span class=\"token punctuation\">,</span> proxyMode <span class=\"token operator\">=</span> <span class=\"token class-name\">ScopedProxyMode</span><span class=\"token punctuation\">.</span>TARGET_CLASS<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">HelloMessageGenerator</span> <span class=\"token function\">sessionScopedBean</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HelloMessageGenerator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>세션의 생명주기와 같은 범위로 bean이 생성된다. </p>\n<h3 id=\"application-scope\" style=\"position:relative;\"><a href=\"#application-scope\" aria-label=\"application scope permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Application Scope</h3>\n<p><code class=\"language-text\">Application scope</code>은 <code class=\"language-text\">ServletContext</code>의 생명주기와 동일하게 빈 생명주기가 결정된다. 그렇기 때문에 어떻게 보면 <code class=\"language-text\">singleton scope</code> 과 굉장히 비슷하지만 bean 의 관점에서 보면 중요한 차이가 있다.</p>\n<p>만일 <code class=\"language-text\">application scope</code>로 되어 있다면, 동일한 bean 인스턴스가 동일한 <code class=\"language-text\">ServletContext</code> 공유하는 여러 servlet-based 어플리케이션에서 활용된다. 하지만 만일, <code class=\"language-text\">singleton scope</code>이라면 하나의 어플리케이션에서 싱글톤 인스턴스로 관리된다. </p>\n<h3 id=\"websocket-scope\" style=\"position:relative;\"><a href=\"#websocket-scope\" aria-label=\"websocket scope permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WebSocket Scope</h3>\n<p><code class=\"language-text\">WebSocket scope</code>을 사용하면 Bean들이 WebSocket session 속성에 저장이 된다. 따라서 동일한 WebSocket session에 빈 요청이 있을 때, 같은 bean 인스턴스를 반환한다. </p>\n<p>참고자료: <a href=\"https://www.baeldung.com/spring-bean-scopes\">https://www.baeldung.com/spring-bean-scopes</a></p>\n<p><a href=\"https://docs.spring.io/spring-framework/docs/3.0.0.M3/reference/html/ch04s04.html#beans-factory-scopes-prototype\">https://docs.spring.io/spring-framework/docs/3.0.0.M3/reference/html/ch04s04.html#beans-factory-scopes-prototype</a></p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#singleton-scope\">Singleton scope</a></li>\n<li><a href=\"#prototype-scope\">Prototype scope</a></li>\n<li>\n<p><a href=\"#web-aware-scopes\">Web Aware Scopes</a></p>\n<ul>\n<li><a href=\"#request-scope\">Request Scope</a></li>\n<li><a href=\"#session-scope\">Session Scope</a></li>\n<li><a href=\"#application-scope\">Application Scope</a></li>\n<li><a href=\"#websocket-scope\">WebSocket Scope</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"May 30, 2021","title":"Bean Scope 종류 알아보기","categories":"스프링 웹","author":"코다","emoji":"🍀"},"fields":{"slug":"/bean-scope/"}},"site":{"siteMetadata":{"siteUrl":"https://yjksw.github.io","comments":{"utterances":{"repo":"yjksw/yjksw.github.io"}}}}},"pageContext":{"slug":"/annotation-valid/","nextSlug":"/cicd-jenkins/","prevSlug":"/bean-scope/"}},"staticQueryHashes":["1073350324","2938748437"]}