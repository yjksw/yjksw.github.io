{"componentChunkName":"component---src-templates-blog-template-js","path":"/high-traffic-service_11/","result":{"data":{"cur":{"id":"3e136db1-f284-581a-99b2-6583b2742509","html":"<blockquote>\n<p>다음은 웹 개발자를 위한 대규모 서비스를 지탱하는 기술을 읽고 정리한 내용입니다 🙌</p>\n</blockquote>\n<br>\n<ul>\n<li>다중화로 어느정도 문제를 해결할 수 있지만 규모가 작으면 다중화를 했을 경우 전체적인 리소스 사용률이 떨어지면서 효율이 떨어진다.</li>\n<li>가상화로 전체적인 리소스 사용률을 높일 수 있다.</li>\n</ul>\n<br>\n<h2 id=\"강의36-가상화-기술\" style=\"position:relative;\"><a href=\"#%EA%B0%95%EC%9D%9836-%EA%B0%80%EC%83%81%ED%99%94-%EA%B8%B0%EC%88%A0\" aria-label=\"강의36 가상화 기술 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[강의36] 가상화 기술</h2>\n<h2 id=\"가상화-기술의-도입\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EC%83%81%ED%99%94-%EA%B8%B0%EC%88%A0%EC%9D%98-%EB%8F%84%EC%9E%85\" aria-label=\"가상화 기술의 도입 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>가상화 기술의 도입</h2>\n<h3 id=\"왜-가상화-기술을-사용하나\" style=\"position:relative;\"><a href=\"#%EC%99%9C-%EA%B0%80%EC%83%81%ED%99%94-%EA%B8%B0%EC%88%A0%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%82%98\" aria-label=\"왜 가상화 기술을 사용하나 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>왜 가상화 기술을 사용하나</h3>\n<ul>\n<li>확장성 → 오버헤드 최소화</li>\n<li>비용대비 성능 → 리소스 사용률 향상, 운용의 유연함</li>\n<li>고가용성 → 환경 격리</li>\n</ul>\n<h2 id=\"가상화-기술의-효용\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EC%83%81%ED%99%94-%EA%B8%B0%EC%88%A0%EC%9D%98-%ED%9A%A8%EC%9A%A9\" aria-label=\"가상화 기술의 효용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>가상화 기술의 효용</h2>\n<ul>\n<li>\n<p>IPMI를 대체하는 하이퍼바이저</p>\n<ul>\n<li>호스트 OS : 서버에서 최초에 기동하는 OS</li>\n</ul>\n</li>\n<li>하드웨어 간 차이 흡수 → 환경 추상화</li>\n<li>준 가상화 사용</li>\n<li>\n<p>리소스 소비 제어</p>\n<ul>\n<li>과부하 경고</li>\n<li>부하 조정</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"가상화-서버-구축정책\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EC%83%81%ED%99%94-%EC%84%9C%EB%B2%84-%EA%B5%AC%EC%B6%95%EC%A0%95%EC%B1%85\" aria-label=\"가상화 서버 구축정책 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>가상화 서버 구축정책</h2>\n<ul>\n<li>\n<p>하드웨어의 이용효율을 높이기 위해 남아있는 리소스를 사용하는 게스트 OS를 투입하는 것이다.</p>\n<ul>\n<li>예를 들어 CPU 리소스가 남이있으면 웹 서버, I/O 리소스가 남아있으면 DB 서버, 메모리 용량이 남아있으면 캐시 서버를 투입한다.</li>\n<li>리소스 소비경향이 비슷한 게스트 OS는 서로 점유하려고 하므로 같이 두지 않는다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"가상화로-얻은-장점-정리\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EC%83%81%ED%99%94%EB%A1%9C-%EC%96%BB%EC%9D%80-%EC%9E%A5%EC%A0%90-%EC%A0%95%EB%A6%AC\" aria-label=\"가상화로 얻은 장점 정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>가상화로 얻은 장점 정리</h2>\n<ul>\n<li>물리적인 리소스 제약에서 해방 → 동적으로 변경 가능</li>\n<li>게스트 OS의 마이그레이션 및 복제가 용이 → 서버 증설이 용이 + 확장성 확보</li>\n<li>소프트웨어 레벨에서 호스트 리소스 제어가능</li>\n<li>비정상 동작 시 문제를 국소화, 호스트를 쉽게 제어</li>\n<li>효율이 향상, 시스템 안정화 가능</li>\n<li>비용대비 성능 향상, 고가용성으로 발전</li>\n</ul>\n<h2 id=\"가상화-도입-시-주의할-점\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EC%83%81%ED%99%94-%EB%8F%84%EC%9E%85-%EC%8B%9C-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90\" aria-label=\"가상화 도입 시 주의할 점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>가상화 도입 시 주의할 점</h2>\n<ul>\n<li>\n<p>성능상 오버헤드가 있다.</p>\n<ul>\n<li>CPU에서 2% - 3%</li>\n<li>메모리 성능에서 1할정도</li>\n<li>네트워크 성능 절반</li>\n<li>I/O 성능 5% 정도</li>\n</ul>\n</li>\n<li>상황에 따라서 가상화를 하는 것이 좋을수도 있고, 아닐수도 있다.</li>\n<li>지금은 가상화 기술이 더 안정되었을 것이다 → docker</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EA%B0%95%EC%9D%9836-%EA%B0%80%EC%83%81%ED%99%94-%EA%B8%B0%EC%88%A0\">강의36 가상화 기술</a></li>\n<li>\n<p><a href=\"#%EA%B0%80%EC%83%81%ED%99%94-%EA%B8%B0%EC%88%A0%EC%9D%98-%EB%8F%84%EC%9E%85\">가상화 기술의 도입</a></p>\n<ul>\n<li><a href=\"#%EC%99%9C-%EA%B0%80%EC%83%81%ED%99%94-%EA%B8%B0%EC%88%A0%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%82%98\">왜 가상화 기술을 사용하나</a></li>\n</ul>\n</li>\n<li><a href=\"#%EA%B0%80%EC%83%81%ED%99%94-%EA%B8%B0%EC%88%A0%EC%9D%98-%ED%9A%A8%EC%9A%A9\">가상화 기술의 효용</a></li>\n<li><a href=\"#%EA%B0%80%EC%83%81%ED%99%94-%EC%84%9C%EB%B2%84-%EA%B5%AC%EC%B6%95%EC%A0%95%EC%B1%85\">가상화 서버 구축정책</a></li>\n<li><a href=\"#%EA%B0%80%EC%83%81%ED%99%94%EB%A1%9C-%EC%96%BB%EC%9D%80-%EC%9E%A5%EC%A0%90-%EC%A0%95%EB%A6%AC\">가상화로 얻은 장점 정리</a></li>\n<li><a href=\"#%EA%B0%80%EC%83%81%ED%99%94-%EB%8F%84%EC%9E%85-%EC%8B%9C-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90\">가상화 도입 시 주의할 점</a></li>\n</ul>\n</div>","excerpt":"다음은 웹 개발자를 위한 대규모 서비스를 지탱하는 기술을 읽고 정리한 내용입니다 🙌 다중화로 어느정도 문제를 해결할 수 있지만 규모가 작으면 다중화를 했을 경우 전체적인 리소스 사용률이 떨어지면서 효율이 떨어진다. 가상화로 전체적인 리소스 사용률을 높일 수 있다. 강의36 가상화 기술 가상화 기술의 도입 왜 가상화 기술을 사용하나 확장성 → 오버헤드 최소화 비용대비 성능 → 리소스 사용률 향상, 운용의 유연함 고가용성 → 환경 격리 가상화 기술의 효용 IPMI를 대체하는 하이퍼바이저 호스트 OS : 서버에서 최초에 기동하는 OS 하드웨어 간 차이 흡수 → 환경 추상화 준 가상화 사용 리소스 소비 제어 과부하 경고 부하 조정 가상화 서버 구축정책 하드웨어의 이용효율을 높이기 위해 남아있는 리소스를 사용하는 게스트 OS를 투입하는 것이다. 예를 들어 CPU 리소스가 남이있으면 웹 서버, I/O 리소스가 남아있으면 DB 서버, 메모리 용량이 남아있으면 캐시 서버를 투입한다. 리소스 소비…","frontmatter":{"date":"September 28, 2021","title":"대규모 서비스를 지탱하는 기술 - 효율 향상 전략","categories":"웹 인프라 책 성능테스트","author":"코다","emoji":"📚"},"fields":{"slug":"/high-traffic-service_11/"}},"next":{"id":"d9ad1f0d-7dee-51fd-94d0-7a9efed85277","html":"<blockquote>\n<p>다음은 웹 개발자를 위한 대규모 서비스를 지탱하는 기술을 읽고 정리한 내용입니다 🙌</p>\n</blockquote>\n<br>\n<ul>\n<li>가동률을 100%로 끌어올려 시스템이 멈추지 않도록 하는 것</li>\n<li>여기서 중요한 것은 SPOF (Single Point of Failure) 단일장애점을 제거하는 것이다.</li>\n</ul>\n<h2 id=\"강의33-다중성-확보\" style=\"position:relative;\"><a href=\"#%EA%B0%95%EC%9D%9833-%EB%8B%A4%EC%A4%91%EC%84%B1-%ED%99%95%EB%B3%B4\" aria-label=\"강의33 다중성 확보 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[강의33] 다중성 확보</h2>\n<h2 id=\"다중성-확보---was-서버\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%A4%91%EC%84%B1-%ED%99%95%EB%B3%B4---was-%EC%84%9C%EB%B2%84\" aria-label=\"다중성 확보   was 서버 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다중성 확보 - WAS 서버</h2>\n<ul>\n<li>중요한 것은 여러대의 서버가 있을 때 몇대의 서버가 정지하더라도 서비스가 정상적으로 처리될 수 있는 상태를 만드는 것이다.</li>\n<li>\n<p>로드밸런서에서 failover를 처리할 수 있다.</p>\n<ul>\n<li>고장난 서버를 분리시키고 정상적인 서버로 요청을 보내는 것</li>\n<li>연결된 서버들에 대한 주기적인 헬스체크</li>\n</ul>\n</li>\n<li>\n<p>failback</p>\n<ul>\n<li>고장난 서버를 복구하고 다시 복귀시키는 것</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"다중성-확보---db-서버\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%A4%91%EC%84%B1-%ED%99%95%EB%B3%B4---db-%EC%84%9C%EB%B2%84\" aria-label=\"다중성 확보   db 서버 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다중성 확보 - DB 서버</h2>\n<ul>\n<li>마찬가지로 여러대의 DB 서버가 있을 때 몇대가 고장나더라도 요청을 정상적으로 처리할 수 있어야 한다.</li>\n<li>\n<p>Master도 다중화 하면 좋다 → 하지만 어렵다.</p>\n<ul>\n<li>\n<p>책의 예시에서는 멀티 마스터를 사용하고 있다.</p>\n<ul>\n<li>양쪽이 서로 slave 관계이기 때문에 한쪽이 쓰기작업을 하면 다른 한쪽으로 전달 (양쪽이 서로 그렇게 작용)</li>\n</ul>\n</li>\n<li>\n<p>MySQL에서는 데이터가 전달되기 까지 몇 밀리초만큼의 딜레이가 있을 수 있다.</p>\n<ul>\n<li>엔터프라이즈에서는 이 부분이 굉장히 중요하게 작용하기 때문에 동기적으로 replication을 수행하여 슬레이브까지 쓰여진 이후에 클라이언트에게 결과를 반환한다.</li>\n</ul>\n</li>\n<li><strong>동기가 맞지 않은 리스크에 대해서는 어느정도 받아드리고 더 중요시하고 싶은 성능을 향상시키는 태도가 중요하다.</strong></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"멀티-마스터\" style=\"position:relative;\"><a href=\"#%EB%A9%80%ED%8B%B0-%EB%A7%88%EC%8A%A4%ED%84%B0\" aria-label=\"멀티 마스터 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>멀티 마스터</h3>\n<ul>\n<li>\n<p>상호 간에 VRRP (Virtual Redundancy protocol) 로 감시하고 있으며 한쪽이 분리하면 본인을 Active 마스터로 승격시킨다.</p>\n<p align=\"center\"><img width=\"85%\" src=\"https://user-images.githubusercontent.com/63405904/136986115-6e607a5b-eafb-4ab3-997b-cf2010535ace.png\"><br>이미지 출처: 대용량 서비스를 지탱하는 기술</p>\n</li>\n<li>2대의 Master서버가 하나는 Active 하나는 Standby로 구성되어 있다.</li>\n<li>한쪽 서버가 다운되면 다른 쪽이 Master로 승격된다. 다운된 서버가 복구되면 다시 원래 역할로 돌아온다.</li>\n<li>\n<p>외부에서 Active 마스터 서버를 알고 있기 위해서 가장 IP를 부여한다.</p>\n<ul>\n<li>즉 2대의 서버에 부여된 IP 이외에 Active 한 서버에 부여되는 추가 가상 IP가 있는 것이다.</li>\n<li>따라서 동일한 IP 주소로 계속 요청을 보내기 때문에 마스터 서버간의 전환이 외부에서는 보이지 않는다.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"다중성-확보---스토리지-서버\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%A4%91%EC%84%B1-%ED%99%95%EB%B3%B4---%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%EC%84%9C%EB%B2%84\" aria-label=\"다중성 확보   스토리지 서버 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다중성 확보 - 스토리지 서버</h2>\n<ul>\n<li>분산 파일 시스템을 활용할 수 있다.</li>\n<li>큰 파일을 분할하여 저장하기도 하고, 하나의 파일을 하나로 취급하여 여러 곳에 분산하여 저장한 메타 데이터를 관리하는 형태로 분산하기도 한다.</li>\n</ul>\n<br>\n<h2 id=\"강의34-시스템-안정화\" style=\"position:relative;\"><a href=\"#%EA%B0%95%EC%9D%9834-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%95%88%EC%A0%95%ED%99%94\" aria-label=\"강의34 시스템 안정화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[강의34] 시스템 안정화</h2>\n<h2 id=\"시스템-안정화를-위한-상반관계\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%95%88%EC%A0%95%ED%99%94%EB%A5%BC-%EC%9C%84%ED%95%9C-%EC%83%81%EB%B0%98%EA%B4%80%EA%B3%84\" aria-label=\"시스템 안정화를 위한 상반관계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시스템 안정화를 위한 상반관계</h2>\n<ul>\n<li>\n<p>시스템 안정화는 자원효율과 상반관계이다.</p>\n<ul>\n<li>메모리를 빠듯하게 튜닝했을 때 장애가 일어날 수 있다.</li>\n<li>\n<p>CPU를 한계에 다다를 정도로 사용하면 장애가 발생할 수 있다.</p>\n<ul>\n<li>서버의 대수를 줄일 수 있지만, 서버 중 1대가 장애가 나면 나머지 CPU에 여유공간이 없어서 처리능력이 부족해져서 요청을 처리하지 못하게 된다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>시스템 안정화는 속도와 상반관계이다.</li>\n<li>안정성을 확보하기 위해 CPU와 메모리에 여유공간을 주고 사용해야한다.</li>\n</ul>\n<h2 id=\"시스템-불안정-요인\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%B6%88%EC%95%88%EC%A0%95-%EC%9A%94%EC%9D%B8\" aria-label=\"시스템 불안정 요인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시스템 불안정 요인</h2>\n<h3 id=\"기능추가-메모리-누수\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%8A%A5%EC%B6%94%EA%B0%80-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%88%84%EC%88%98\" aria-label=\"기능추가 메모리 누수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기능추가, 메모리 누수</h3>\n<ul>\n<li>새로운 기능이 무거워서 부하가 일어나 서버 다운</li>\n<li>메모리 누수가 시간이 지날수록 쌓여서 스왑을 사용하며 부하가 증가</li>\n</ul>\n<h3 id=\"지뢰\" style=\"position:relative;\"><a href=\"#%EC%A7%80%EB%A2%B0\" aria-label=\"지뢰 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>지뢰</h3>\n<ul>\n<li>특정 url을 읽으면 응답이 오지 않아서 장애의 요인이 되는 것</li>\n<li>무한루프나 메모리 누수인 경우가 많다 → 비정상적으로 메모리를 소비하는 것</li>\n<li>애초에 지뢰를 없애는 것도 중요하지만 그것을 어렵기 때문에 밟더라도 치명적인 문제가 되지 않도록 설계하는 것이 중요하다.</li>\n</ul>\n<h3 id=\"사용자-액세스-패턴\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%95%A1%EC%84%B8%EC%8A%A4-%ED%8C%A8%ED%84%B4\" aria-label=\"사용자 액세스 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사용자 액세스 패턴</h3>\n<ul>\n<li>어떤 특정 사이트에 집중적으로 사용자 접속이 일어나서 다운되는 경우</li>\n</ul>\n<h3 id=\"데이터량-증가\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%9F%89-%EC%A6%9D%EA%B0%80\" aria-label=\"데이터량 증가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데이터량 증가</h3>\n<ul>\n<li>데이터 증가로 부하가 일어나는 경우</li>\n</ul>\n<h3 id=\"외부연계-추가\" style=\"position:relative;\"><a href=\"#%EC%99%B8%EB%B6%80%EC%97%B0%EA%B3%84-%EC%B6%94%EA%B0%80\" aria-label=\"외부연계 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>외부연계 추가</h3>\n<ul>\n<li>외부 모듈이 다운되는 경우</li>\n<li>그렇더라도 서비스가 영향을 받지않고 충분히 동작하도록 설계하는 것이 중요</li>\n</ul>\n<h3 id=\"메모리-hdd-장애-nic-장애\" style=\"position:relative;\"><a href=\"#%EB%A9%94%EB%AA%A8%EB%A6%AC-hdd-%EC%9E%A5%EC%95%A0-nic-%EC%9E%A5%EC%95%A0\" aria-label=\"메모리 hdd 장애 nic 장애 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>메모리, HDD 장애, NIC 장애</h3>\n<ul>\n<li>하드웨어가 능력의 저하의 원인이 될 수 있지만 치명적인 문제가 되지 않도록 하는 것이 중요하다.</li>\n<li>헬스체크로 미리 체크하여 문제가 생긴 경우 요청을 우회하는 것이 중요하다.</li>\n</ul>\n<br>\n<h2 id=\"강의35-시스템-안정화-대책\" style=\"position:relative;\"><a href=\"#%EA%B0%95%EC%9D%9835-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%95%88%EC%A0%95%ED%99%94-%EB%8C%80%EC%B1%85\" aria-label=\"강의35 시스템 안정화 대책 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[강의35] 시스템 안정화 대책</h2>\n<h2 id=\"실제-안정화-대책---적절한-버퍼-유지와-불안정-요인-제거\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%EC%A0%9C-%EC%95%88%EC%A0%95%ED%99%94-%EB%8C%80%EC%B1%85---%EC%A0%81%EC%A0%88%ED%95%9C-%EB%B2%84%ED%8D%BC-%EC%9C%A0%EC%A7%80%EC%99%80-%EB%B6%88%EC%95%88%EC%A0%95-%EC%9A%94%EC%9D%B8-%EC%A0%9C%EA%B1%B0\" aria-label=\"실제 안정화 대책   적절한 버퍼 유지와 불안정 요인 제거 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실제 안정화 대책 - 적절한 버퍼 유지와 불안정 요인 제거</h2>\n<ul>\n<li>적잘한 버퍼 유지를 위해 7할 정도로 운용을 한다. 즉 70%를 상한선으로 정하여 넘어가는 경우 서버를 추가하거나 메모리를 추가하는 것</li>\n<li>불안정 요인을 제거하기 위해 SQL 부하대책, 메모리 누수 줄이기, 비정작 동식 자율제어 등을 한다.</li>\n</ul>\n<h3 id=\"sql-부하-대책\" style=\"position:relative;\"><a href=\"#sql-%EB%B6%80%ED%95%98-%EB%8C%80%EC%B1%85\" aria-label=\"sql 부하 대책 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SQL 부하 대책</h3>\n<ul>\n<li>부하나 높아지는 쿼리를 날리지 않도록 하는 것이 중요하다.</li>\n<li>개발자는 본인이 보내는 쿼리를 파악하여 부하가 높은 쿼리를 발행할 경우 그 용도의 DB를 따로 준비하여 그곳으로 SQL를 날리도록 한다.</li>\n</ul>\n<h3 id=\"이상-동작-시-자율제어\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EC%83%81-%EB%8F%99%EC%9E%91-%EC%8B%9C-%EC%9E%90%EC%9C%A8%EC%A0%9C%EC%96%B4\" aria-label=\"이상 동작 시 자율제어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이상 동작 시 자율제어</h3>\n<ul>\n<li>\n<p>자동 DoS 판정</p>\n<ul>\n<li>다수의 요청이 오는 경우 에러 처리</li>\n</ul>\n</li>\n<li>\n<p>자동 재시작</p>\n<ul>\n<li>리소시를 지나치게 사용했다면 서버를 재시작한다.</li>\n</ul>\n</li>\n<li>\n<p>자동 쿼리제거</p>\n<ul>\n<li>소요시간이 긴 SQL을 Kill 하도록 함</li>\n<li>특정 시간마다 체크하여 소요시간이 긴 쿼리를 kill 한다.</li>\n</ul>\n</li>\n<li>자율제어를 지나치게 잘 해놓으면 문제가 있어도 어플리케이션이 어느정도 잘 동작하게 된다. 이러면 문제를 알아채지 못해서 본질적인 문제가 해결되지 않을수도 있다는 것을 기억해야한다.</li>\n<li>자율제어는 잠정적인 해법이다.</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EA%B0%95%EC%9D%9833-%EB%8B%A4%EC%A4%91%EC%84%B1-%ED%99%95%EB%B3%B4\">강의33 다중성 확보</a></li>\n<li><a href=\"#%EB%8B%A4%EC%A4%91%EC%84%B1-%ED%99%95%EB%B3%B4---was-%EC%84%9C%EB%B2%84\">다중성 확보 - WAS 서버</a></li>\n<li>\n<p><a href=\"#%EB%8B%A4%EC%A4%91%EC%84%B1-%ED%99%95%EB%B3%B4---db-%EC%84%9C%EB%B2%84\">다중성 확보 - DB 서버</a></p>\n<ul>\n<li><a href=\"#%EB%A9%80%ED%8B%B0-%EB%A7%88%EC%8A%A4%ED%84%B0\">멀티 마스터</a></li>\n</ul>\n</li>\n<li><a href=\"#%EB%8B%A4%EC%A4%91%EC%84%B1-%ED%99%95%EB%B3%B4---%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80-%EC%84%9C%EB%B2%84\">다중성 확보 - 스토리지 서버</a></li>\n<li><a href=\"#%EA%B0%95%EC%9D%9834-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%95%88%EC%A0%95%ED%99%94\">강의34 시스템 안정화</a></li>\n<li><a href=\"#%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%95%88%EC%A0%95%ED%99%94%EB%A5%BC-%EC%9C%84%ED%95%9C-%EC%83%81%EB%B0%98%EA%B4%80%EA%B3%84\">시스템 안정화를 위한 상반관계</a></li>\n<li>\n<p><a href=\"#%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%B6%88%EC%95%88%EC%A0%95-%EC%9A%94%EC%9D%B8\">시스템 불안정 요인</a></p>\n<ul>\n<li><a href=\"#%EA%B8%B0%EB%8A%A5%EC%B6%94%EA%B0%80-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EB%88%84%EC%88%98\">기능추가, 메모리 누수</a></li>\n<li><a href=\"#%EC%A7%80%EB%A2%B0\">지뢰</a></li>\n<li><a href=\"#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%95%A1%EC%84%B8%EC%8A%A4-%ED%8C%A8%ED%84%B4\">사용자 액세스 패턴</a></li>\n<li><a href=\"#%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%9F%89-%EC%A6%9D%EA%B0%80\">데이터량 증가</a></li>\n<li><a href=\"#%EC%99%B8%EB%B6%80%EC%97%B0%EA%B3%84-%EC%B6%94%EA%B0%80\">외부연계 추가</a></li>\n<li><a href=\"#%EB%A9%94%EB%AA%A8%EB%A6%AC-hdd-%EC%9E%A5%EC%95%A0-nic-%EC%9E%A5%EC%95%A0\">메모리, HDD 장애, NIC 장애</a></li>\n</ul>\n</li>\n<li><a href=\"#%EA%B0%95%EC%9D%9835-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%95%88%EC%A0%95%ED%99%94-%EB%8C%80%EC%B1%85\">강의35 시스템 안정화 대책</a></li>\n<li>\n<p><a href=\"#%EC%8B%A4%EC%A0%9C-%EC%95%88%EC%A0%95%ED%99%94-%EB%8C%80%EC%B1%85---%EC%A0%81%EC%A0%88%ED%95%9C-%EB%B2%84%ED%8D%BC-%EC%9C%A0%EC%A7%80%EC%99%80-%EB%B6%88%EC%95%88%EC%A0%95-%EC%9A%94%EC%9D%B8-%EC%A0%9C%EA%B1%B0\">실제 안정화 대책 - 적절한 버퍼 유지와 불안정 요인 제거</a></p>\n<ul>\n<li><a href=\"#sql-%EB%B6%80%ED%95%98-%EB%8C%80%EC%B1%85\">SQL 부하 대책</a></li>\n<li><a href=\"#%EC%9D%B4%EC%83%81-%EB%8F%99%EC%9E%91-%EC%8B%9C-%EC%9E%90%EC%9C%A8%EC%A0%9C%EC%96%B4\">이상 동작 시 자율제어</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"September 28, 2021","title":"대규모 서비스를 지탱하는 기술 - 다중성 확보, 시스템 안정화","categories":"웹 인프라 책 성능테스트","author":"코다","emoji":"📚"},"fields":{"slug":"/high-traffic-service_10/"}},"prev":{"id":"67377600-a29e-5099-ba3e-69e517ee7ca0","html":"<blockquote>\n<p>다음은 웹 개발자를 위한 대규모 서비스를 지탱하는 기술을 읽고 정리한 내용입니다 🙌</p>\n</blockquote>\n<br>\n<ul>\n<li>규모가 커지면서 트래픽이 커지면 문제가 발생한다. → 라우터의 성능 관점에서는 bps보다 패킷 단위인 pps가 더 중요하다. 사용하고 있는 라우터에서 감당하는 이상의 패킷이 송수신되면 문제가 발생한다.</li>\n<li>또한 호스트 수가 500을 넘어가면서 하나의 서브넷을 구성하면 여러 패킷 손실등이 발생하기도 한다.</li>\n<li>글로벌 서비스로 확장하면 데이터 센트럴 한군데 두었을 때 latency도 한계에 다다를 수 있다.</li>\n</ul>\n<h2 id=\"강의38-네트워크-분기점\" style=\"position:relative;\"><a href=\"#%EA%B0%95%EC%9D%9838-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EB%B6%84%EA%B8%B0%EC%A0%90\" aria-label=\"강의38 네트워크 분기점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[강의38] 네트워크 분기점</h2>\n<h2 id=\"1gbps의-한계---pc-라우터의-한계\" style=\"position:relative;\"><a href=\"#1gbps%EC%9D%98-%ED%95%9C%EA%B3%84---pc-%EB%9D%BC%EC%9A%B0%ED%84%B0%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"1gbps의 한계   pc 라우터의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1Gbps의 한계 - PC 라우터의 한계</h2>\n<ul>\n<li>1Gbps 는 30만pps → 한계치이다.</li>\n<li>이것을 해결하기 위해서는 PC 라우터를 여러 대 병렬화 하던지, 고가의 라우터를 사용해야 한다.</li>\n</ul>\n<h2 id=\"500호스트의-한계---1서브넷-arp-테이블에서의-한계\" style=\"position:relative;\"><a href=\"#500%ED%98%B8%EC%8A%A4%ED%8A%B8%EC%9D%98-%ED%95%9C%EA%B3%84---1%EC%84%9C%EB%B8%8C%EB%84%B7-arp-%ED%85%8C%EC%9D%B4%EB%B8%94%EC%97%90%EC%84%9C%EC%9D%98-%ED%95%9C%EA%B3%84\" aria-label=\"500호스트의 한계   1서브넷 arp 테이블에서의 한계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>500호스트의 한계 - 1서브넷 ARP 테이블에서의 한계</h2>\n<ul>\n<li>\n<p>스위치의 ARP(Address Resolution Protocol table)에서 한계가 있다.</p>\n<ul>\n<li>ARP는 IP주소와 MAC 주소간의 관계를 나타내는 테이블이다.</li>\n</ul>\n</li>\n<li>이 테이블의 크기에 제한이 있다. 그것을 넘어가게 되면 특정 호스트로 ping이 가지 않게 된다.</li>\n<li>서브넷 내에 호스트가 많으면 브로드캐스팅 패킷이 증가하여 트래픽이 부하를 생성한다.</li>\n</ul>\n<h2 id=\"네트워크-구조-계층화\" style=\"position:relative;\"><a href=\"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EA%B5%AC%EC%A1%B0-%EA%B3%84%EC%B8%B5%ED%99%94\" aria-label=\"네트워크 구조 계층화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네트워크 구조 계층화</h2>\n<ul>\n<li>\n<p>지금까지 언급한 문제에 대한 대책</p>\n<ul>\n<li>3단 구조로 네트워크를 계층화 하자는 것이다.</li>\n</ul>\n</li>\n<li>\n<p><strong>3단 구조</strong></p>\n<ol>\n<li>가장 작은 것은 Access 계층</li>\n<li>그 다음이 Distribution 계층</li>\n<li>가장 위가 Core 계층 또는 OSPF 영역 </li>\n<li>이렇게 가장 작은 서브넷에서 100대, 200대를 억제, 디스트리뷰션에서 1000대, 코어 전체에서 100000 단위로 다룬다.</li>\n</ol>\n</li>\n<li>Distribution 영역간 트래픽을 제어해서 너무 증가하지 않도록 하고 서브넷 내에서의 통신량을 제어한다.</li>\n</ul>\n<h2 id=\"글로벌화\" style=\"position:relative;\"><a href=\"#%EA%B8%80%EB%A1%9C%EB%B2%8C%ED%99%94\" aria-label=\"글로벌화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>글로벌화</h2>\n<ul>\n<li>CDN을 사용해서 여러 곳에 배치된 데이터센터를 활용해 latency를 줄인다.</li>\n</ul>\n<br>\n<h2 id=\"강의39-한층-높은-단계로\" style=\"position:relative;\"><a href=\"#%EA%B0%95%EC%9D%9839-%ED%95%9C%EC%B8%B5-%EB%86%92%EC%9D%80-%EB%8B%A8%EA%B3%84%EB%A1%9C\" aria-label=\"강의39 한층 높은 단계로 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>[강의39] 한층 높은 단계로</h2>\n<h2 id=\"웹-서비스-인프라의-핵심\" style=\"position:relative;\"><a href=\"#%EC%9B%B9-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%9D%B8%ED%94%84%EB%9D%BC%EC%9D%98-%ED%95%B5%EC%8B%AC\" aria-label=\"웹 서비스 인프라의 핵심 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹 서비스 인프라의 핵심</h2>\n<ul>\n<li>저비용, 높은 확장성</li>\n<li>적당하면서 충분히 높은 신뢰성</li>\n<li>\n<p>기술 4가지</p>\n<ul>\n<li>확장성</li>\n<li>다중화</li>\n<li>효율향상</li>\n<li>네트워크</li>\n</ul>\n</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EA%B0%95%EC%9D%9838-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EB%B6%84%EA%B8%B0%EC%A0%90\">강의38 네트워크 분기점</a></li>\n<li><a href=\"#1gbps%EC%9D%98-%ED%95%9C%EA%B3%84---pc-%EB%9D%BC%EC%9A%B0%ED%84%B0%EC%9D%98-%ED%95%9C%EA%B3%84\">1Gbps의 한계 - PC 라우터의 한계</a></li>\n<li><a href=\"#500%ED%98%B8%EC%8A%A4%ED%8A%B8%EC%9D%98-%ED%95%9C%EA%B3%84---1%EC%84%9C%EB%B8%8C%EB%84%B7-arp-%ED%85%8C%EC%9D%B4%EB%B8%94%EC%97%90%EC%84%9C%EC%9D%98-%ED%95%9C%EA%B3%84\">500호스트의 한계 - 1서브넷 ARP 테이블에서의 한계</a></li>\n<li><a href=\"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EA%B5%AC%EC%A1%B0-%EA%B3%84%EC%B8%B5%ED%99%94\">네트워크 구조 계층화</a></li>\n<li><a href=\"#%EA%B8%80%EB%A1%9C%EB%B2%8C%ED%99%94\">글로벌화</a></li>\n<li><a href=\"#%EA%B0%95%EC%9D%9839-%ED%95%9C%EC%B8%B5-%EB%86%92%EC%9D%80-%EB%8B%A8%EA%B3%84%EB%A1%9C\">강의39 한층 높은 단계로</a></li>\n<li><a href=\"#%EC%9B%B9-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%9D%B8%ED%94%84%EB%9D%BC%EC%9D%98-%ED%95%B5%EC%8B%AC\">웹 서비스 인프라의 핵심</a></li>\n</ul>\n</div>","frontmatter":{"date":"September 29, 2021","title":"대규모 서비스를 지탱하는 기술 - 웹 서비스와 네트워크","categories":"웹 인프라 책 성능테스트","author":"코다","emoji":"📚"},"fields":{"slug":"/high-traffic-service_12/"}},"site":{"siteMetadata":{"siteUrl":"https://yjksw.github.io","comments":{"utterances":{"repo":"yjksw/yjksw.github.io"}}}}},"pageContext":{"slug":"/high-traffic-service_11/","nextSlug":"/high-traffic-service_10/","prevSlug":"/high-traffic-service_12/"}},"staticQueryHashes":["1073350324","2938748437"]}