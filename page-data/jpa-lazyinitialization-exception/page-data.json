{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/jpa-lazyinitialization-exception/",
    "result": {"data":{"cur":{"id":"21638d95-ab20-5ddc-8832-ed946e1a5c04","html":"<h2 id=\"lazyinitialization-ì—ëŸ¬-ë°œìƒ-ì´ìœ \" style=\"position:relative;\"><a href=\"#lazyinitialization-%EC%97%90%EB%9F%AC-%EB%B0%9C%EC%83%9D-%EC%9D%B4%EC%9C%A0\" aria-label=\"lazyinitialization ì—ëŸ¬ ë°œìƒ ì´ìœ  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LazyInitialization ì—ëŸ¬ ë°œìƒ ì´ìœ </h2>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">    <span class=\"token class-name\">LazyInitializationException</span><span class=\"token operator\">:</span> could not initialize proxy <span class=\"token operator\">-</span> no session</code></pre></div>\n<ul>\n<li>Lazy Loadingì„ í•˜ë ¤ê³  í•˜ëŠ”ë° ì„¸ì…˜ì´ ì‚¬ë¼ì ¸ì„œ í”„ë¡ì‹œ ì´ˆê¸°í™”ê°€ ë¶ˆê°€ëŠ¥í•´ ì§€ì—°ë¡œë”©ì„ ëª»í•˜ëŠ” ê²½ìš°ì— ë°œìƒí•˜ëŠ” ì—ëŸ¬</li>\n<li>ê°€ì¥ ë‹¨ìˆœí•œ ë°©ë²•ìœ¼ë¡œëŠ” <code class=\"language-text\">FetchType</code> ì„ <code class=\"language-text\">EAGER</code>ë¡œ ì„¤ì •í•´ì„œ ì¼ê´„ì ìœ¼ë¡œ ë¶€ëª¨ í˜¸ì¶œì‹œ ìì‹ì´ ëª¨ë‘ ì¦‰ì‹œë¡œë”©ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ë„ë¡ í•˜ë©´ ë˜ì§€ë§Œ, ë¹„ë‹ˆì§€ìŠ¤ì ì¸ ì´ìœ ê°€ ì•„ë‹Œ <code class=\"language-text\">LazyInitialization</code>ì„ í”¼í•˜ê¸° ìœ„í•´ <code class=\"language-text\">EAGER</code>ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šë‹¤.</li>\n<li>ìœ„ ì—ëŸ¬ëŠ” Lazy Loadingì„ í•˜ëŠ” ì‹œì ê¹Œì§€ sessionì„ ìœ ì§€ì‹œì¼œì£¼ëŠ” ê²ƒì´ í•µì‹¬ì´ë©° ì£¼ë¡œ <code class=\"language-text\">@Transactional</code> ì¶”ê°€ë¡œ í•´ë‹¹ ë¬¸ì œëŠ” í•´ê²°ëœë‹¤.</li>\n</ul>\n<br>\n<h2 id=\"ì„œë¹„ìŠ¤-ì™¸ë¶€ì—ì„œ-lazyloading-collection-í˜¸ì¶œ-ì‹œ\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%99%B8%EB%B6%80%EC%97%90%EC%84%9C-lazyloading-collection-%ED%98%B8%EC%B6%9C-%EC%8B%9C\" aria-label=\"ì„œë¹„ìŠ¤ ì™¸ë¶€ì—ì„œ lazyloading collection í˜¸ì¶œ ì‹œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì„œë¹„ìŠ¤ ì™¸ë¶€ì—ì„œ LazyLoading Collection í˜¸ì¶œ ì‹œ</h2>\n<p>ì„œë¹„ìŠ¤ì—ì„œ LazyLoadingì„ í•˜ê³  ì‹¶ë‹¤ë©´ <code class=\"language-text\">@Transactional</code> ì„ ë¶™ì—¬ì„œ í•´ê²°í•  ìˆ˜ ìˆì§€ë§Œ ê°„í˜¹ ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ ë°–ì—ì„œ ì§€ì—°ë¡œë”© ì§€ì •ë˜ì–´ ìˆëŠ” ì»¬ë ‰ì…˜ì„ ì¡°íšŒí•´ì•¼í•  ë•Œê°€ ìˆë‹¤. ê·¸ëŸ´ ë•Œ <code class=\"language-text\">LazyInitialization</code> ì—ëŸ¬ë¥¼ í”¼í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë‘ê°€ì§€ì´ë‹¤.</p>\n<h3 id=\"1-code-classlanguage-texthibernateinitializecodeë¥¼-ì‚¬ìš©í•´-ì„œë¹„ìŠ¤-ë‚´ì—ì„œ-ì¡°íšŒ\" style=\"position:relative;\"><a href=\"#1-code-classlanguage-texthibernateinitializecode%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%82%B4%EC%97%90%EC%84%9C-%EC%A1%B0%ED%9A%8C\" aria-label=\"1 code classlanguage texthibernateinitializecodeë¥¼ ì‚¬ìš©í•´ ì„œë¹„ìŠ¤ ë‚´ì—ì„œ ì¡°íšŒ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. <code class=\"language-text\">Hibernate.initialize()</code>ë¥¼ ì‚¬ìš©í•´ ì„œë¹„ìŠ¤ ë‚´ì—ì„œ ì¡°íšŒ</h3>\n<p>ë§Œì¼ ì„œë¹„ìŠ¤ê°€ ì•„ë‹Œ ë‹¤ë¥¸ í´ë˜ìŠ¤ ë‚´ì—ì„œ JPA ì¡°íšŒë¥¼ í•˜ê³  ì‹¶ë‹¤ë©´ ì„¸ì…˜ì´ ìœ ì§€ë˜ì§€ ì•ŠëŠ”ë‹¤. (<code class=\"language-text\">@Transactional</code> ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì´ëŠ” ê²ƒì´ë‚˜, <code class=\"language-text\">FetchType.EAGER</code> ì„ ë¶™ì´ëŠ” ê²ƒì´ ëª¨ë‘ ë¶€ì í•©í•˜ê±°ë‚˜ ë¹„íš¨ìœ¨ì ì´ë‹¤) <br></p>\n<p>ì´ë•ŒëŠ” í•´ë‹¹ ì»¬ë ‰ì…˜ì„ ì¡°íšŒí•˜ëŠ” ë©”ì„œë“œë¥¼ ì„œë¹„ìŠ¤ ë‚´ì— ë§Œë“¤ì–´ í˜¸ì¶œí•˜ì—¬ ì‚¬ìš©í•˜ê³ , í•´ë‹¹ ë©”ì„œë“œ ë‚´ì—ì„œ <code class=\"language-text\">Hibernate.initialize(Entity)</code> ë¥¼ ì‚¬ìš©í•´ì„œ í”„ë¡ì‹œê°€ ì¦‰ì‹œ ì´ˆê¸°í™” ë˜ë„ë¡ í•˜ë©´ ëœë‹¤. <br></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Transactional</span><span class=\"token punctuation\">(</span>readOnly <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Task</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getTaskListEager</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> taskId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Task</span><span class=\"token punctuation\">></span></span> taskList <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tasksRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span>taskId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTaskList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token class-name\">Hibernate</span><span class=\"token punctuation\">.</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span>taskList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> taskList<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><strong>ì£¼ì˜í•  ì :</strong> <code class=\"language-text\">Hibernate.initialize()</code> ëŠ” ê·¸ ì•ˆì— ì¤‘ì²©ë˜ì–´ ìˆëŠ” LazyCollectionì— ëŒ€í•´ì„œëŠ” ê°€ì§€ê³ ì˜¤ì§€ ëª»í•˜ë¯€ë¡œ ê·¸ê²ƒì— ëŒ€í•œ <code class=\"language-text\">Hibernate.initialize()</code>ëŠ” ë”°ë¡œ í•´ì¤˜ì•¼í•œë‹¤.</li>\n</ul>\n<h3 id=\"2-transactionmanager-ì‚¬ìš©\" style=\"position:relative;\"><a href=\"#2-transactionmanager-%EC%82%AC%EC%9A%A9\" aria-label=\"2 transactionmanager ì‚¬ìš© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. TransactionManager ì‚¬ìš©</h3>\n<p>ì–´ë…¸í…Œì´ì…˜ì´ ì•„ë‹ˆë¼ Springì—ì„œ ì œê³µí•´ì£¼ëŠ” TransactionManagerë¥¼ ì§ì ‘ ì‚¬ìš©í•´ì„œ sessionì„ ì§ì ‘ ì§€ì •í•˜ë„ë¡ í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Autowired</span>\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">PlatformTransactioinManager</span> transactionManager<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Task</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getTaskListEager</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> tasksId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">TransactionStatus</span> transactionStatus <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>transactionManager<span class=\"token punctuation\">.</span><span class=\"token function\">getTransaction</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">DefaultTransactionDefinition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Task</span><span class=\"token punctuation\">></span></span> taskList <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\ttaskList <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tasksRepository<span class=\"token punctuation\">.</span><span class=\"token function\">findOne</span><span class=\"token punctuation\">(</span>tasksId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTaskList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>transactionManager<span class=\"token punctuation\">.</span><span class=\"token function\">commit</span><span class=\"token punctuation\">(</span>transactionStatus<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>transactionManager<span class=\"token punctuation\">.</span><span class=\"token function\">rollback</span><span class=\"token punctuation\">(</span>transactionStatus<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">return</span> taskList<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>[ì°¸ê³ ìë£Œ]</strong></p>\n<ul>\n<li><a href=\"https://thorben-janssen.com/lazyinitializationexception/\">https://thorben-janssen.com/lazyinitializationexception/</a></li>\n<li><a href=\"https://github.com/HomoEfficio/dev-tips/blob/master/Spring%20Data%20JPA%20-%20LazyInitialization%20%EC%97%90%EB%9F%AC%20-%20getOne().md\">https://github.com/HomoEfficio/dev-tips/blob/master/Spring Data JPA - LazyInitialization ì—ëŸ¬ - getOne().md</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#lazyinitialization-%EC%97%90%EB%9F%AC-%EB%B0%9C%EC%83%9D-%EC%9D%B4%EC%9C%A0\">LazyInitialization ì—ëŸ¬ ë°œìƒ ì´ìœ </a></p>\n</li>\n<li>\n<p><a href=\"#%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%99%B8%EB%B6%80%EC%97%90%EC%84%9C-lazyloading-collection-%ED%98%B8%EC%B6%9C-%EC%8B%9C\">ì„œë¹„ìŠ¤ ì™¸ë¶€ì—ì„œ LazyLoading Collection í˜¸ì¶œ ì‹œ</a></p>\n<ul>\n<li><a href=\"#1-hibernateinitialize%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%82%B4%EC%97%90%EC%84%9C-%EC%A1%B0%ED%9A%8C\">1. <code class=\"language-text\">Hibernate.initialize()</code>ë¥¼ ì‚¬ìš©í•´ ì„œë¹„ìŠ¤ ë‚´ì—ì„œ ì¡°íšŒ</a></li>\n<li><a href=\"#2-transactionmanager-%EC%82%AC%EC%9A%A9\">2. TransactionManager ì‚¬ìš©</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"LazyInitialization ì—ëŸ¬ ë°œìƒ ì´ìœ  Lazy Loadingì„ í•˜ë ¤ê³  í•˜ëŠ”ë° ì„¸ì…˜ì´ ì‚¬ë¼ì ¸ì„œ í”„ë¡ì‹œ ì´ˆê¸°í™”ê°€ ë¶ˆê°€ëŠ¥í•´ ì§€ì—°ë¡œë”©ì„ ëª»í•˜ëŠ” ê²½ìš°ì— ë°œìƒí•˜ëŠ” ì—ëŸ¬ ê°€ì¥ ë‹¨ìˆœí•œ ë°©ë²•ìœ¼ë¡œëŠ”  ì„ ë¡œ ì„¤ì •í•´ì„œ ì¼ê´„ì ìœ¼ë¡œ ë¶€ëª¨ í˜¸ì¶œì‹œ ìì‹ì´ ëª¨ë‘ ì¦‰ì‹œë¡œë”©ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ë„ë¡ í•˜ë©´ ë˜ì§€ë§Œ, ë¹„ë‹ˆì§€ìŠ¤ì ì¸ ì´ìœ ê°€ ì•„ë‹Œ ì„ í”¼í•˜ê¸° ìœ„í•´ ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šë‹¤. ìœ„ ì—ëŸ¬ëŠ” Lazy Loadingì„ í•˜ëŠ” ì‹œì ê¹Œì§€ sessionì„ ìœ ì§€ì‹œì¼œì£¼ëŠ” ê²ƒì´ í•µì‹¬ì´ë©° ì£¼ë¡œ  ì¶”ê°€ë¡œ í•´ë‹¹ ë¬¸ì œëŠ” í•´ê²°ëœë‹¤. ì„œë¹„ìŠ¤ ì™¸ë¶€ì—ì„œ LazyLoading Collection í˜¸ì¶œ ì‹œ ì„œë¹„ìŠ¤ì—ì„œ LazyLoadingì„ í•˜ê³  ì‹¶ë‹¤ë©´  ì„ ë¶™ì—¬ì„œ í•´ê²°í•  ìˆ˜ ìˆì§€ë§Œ ê°„í˜¹ ì„œë¹„ìŠ¤ í´ë˜ìŠ¤ ë°–ì—ì„œ ì§€ì—°ë¡œë”© ì§€ì •ë˜ì–´ ìˆëŠ” ì»¬ë ‰ì…˜ì„ ì¡°íšŒí•´ì•¼í•  ë•Œê°€ ìˆë‹¤. ê·¸ëŸ´ ë•Œ  ì—ëŸ¬ë¥¼ í”¼í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë‘ê°€ì§€ì´ë‹¤. 1. ë¥¼ ì‚¬ìš©í•´ ì„œë¹„ìŠ¤ ë‚´ì—ì„œ ì¡°íšŒ ë§Œì¼ ì„œë¹„ìŠ¤ê°€ ì•„ë‹Œ ë‹¤ë¥¸ í´ë˜ìŠ¤ ë‚´ì—ì„œ JPA ì¡°íšŒë¥¼ í•˜ê³  ì‹¶ë‹¤ë©´ ì„¸ì…˜ì´ ìœ ì§€ë˜ì§€ ì•ŠëŠ”ë‹¤. â€¦","frontmatter":{"date":"August 04, 2021","title":"LazyInitializationException ë€?","categories":"JPA","author":"ì½”ë‹¤","emoji":"ğŸš€"},"fields":{"slug":"/jpa-lazyinitialization-exception/"}},"next":{"id":"8316d4d6-553f-5d70-b995-11dc98735d16","html":"<h2 id=\"intro\" style=\"position:relative;\"><a href=\"#intro\" aria-label=\"intro permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Intro</h2>\n<p>í•¨ìˆ˜ëŠ” <strong>ì‹œìŠ¤í…œì˜ ìƒíƒœë¥¼ ë°”ê¾¸ëŠ”ì§€</strong>ì— ë”°ë¼ì„œ í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë‚˜ë‰œë‹¤. 1) Command 2) Query. ì´ ë‘ ê°€ì§€ ë¶„ë¥˜ë²•ì— ëŒ€í•´ì„œ í•˜ë‚˜ì˜ í•¨ìˆ˜ê°€ ë‘ ê°€ì§€ ê²½ìš°ë¥¼ ëª¨ë‘ ë‹´ë‹¹í•˜ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šë‹¤.</p>\n<br>\n<h2 id=\"command-vs-query\" style=\"position:relative;\"><a href=\"#command-vs-query\" aria-label=\"command vs query permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Command vs. Query</h2>\n<ul>\n<li>\n<p><strong>Query</strong></p>\n<p>ì£¼ì–´ì§„ ì¿¼ë¦¬ì— ëŒ€í•œ ê²°ê³¼ê°’ì„ ë°˜í™˜í•˜ê³  ì‹œìŠ¤í…œì˜ ìƒíƒœë¥¼ ë³€í™”ì‹œí‚¤ì§€ëŠ” ì•ŠëŠ”ë‹¤.</p>\n<p>ë‹¤ë¥¸ ê°’ì„ ë°”ê¾¸ì§€ ì•Šê³  ì˜¤ì§ ì§ˆë¬¸ì—ë§Œ ëŒ€ë‹µí•œë‹¤.</p>\n<p>ë¶€ì‘ìš©ì—ì„œ ììœ ë¡­ë‹¤. (read-only)</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token number\">5</span></code></pre></div>\n</li>\n<li>\n<p><strong>Command</strong></p>\n<p>ê°’ì„ ë°˜í™˜í•˜ì§€ ì•Šì•„ë„ ì‹œìŠ¤í…œì˜ ìƒíƒœë¥¼ ë³€í™”ì‹œí‚¨ë‹¤. (ì˜êµ¬ì )</p>\n<p>ë¶€ì‘ìš©ì´ ìƒê¸¸ ì—¬ê¸°ì ìˆë‹¤. (mutator, modifier)</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\nlist<span class=\"token punctuation\">.</span><span class=\"token function\">reverse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span>list<span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n</ul>\n<p>ì´ë ‡ê²Œ í•¨ìˆ˜ë¥¼ ë‘ ê°€ì§€ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì€ ìœ ìš©í•˜ë‹¤. í˜„ì¬ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜ê°€ ìƒíƒœë¥¼ ë°”ê¾¸ì§€ ì•ŠëŠ” query ë¼ë©´ ì‹ ë¢°ë¥¼ ê°€ì§€ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ìƒíƒœë¥¼ ë°”ê¾¸ëŠ” commandë¼ë©´ í•¨ìˆ˜ê°„ ìˆœì„œì— ì£¼ì˜ë¥¼ ê¸°ìš¸ì´ê³  ë¶€ì‘ìš©ì´ ìƒê¸¸ ì—¬ì§€ë¥¼ ì¸ì§€í•˜ê³  ìˆì–´ì•¼ í•œë‹¤.</p>\n<br>\n<h2 id=\"cqs---command-query-separation\" style=\"position:relative;\"><a href=\"#cqs---command-query-separation\" aria-label=\"cqs   command query separation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CQS - Command Query Separation</h2>\n<p><em><strong>Betrand Meyer</strong></em>ë¼ëŠ” í”„ë‘ìŠ¤ í•™ìëŠ” í•˜ë‚˜ì˜ í•¨ìˆ˜ê°€ command ì´ê±°ë‚˜ query ì´ì–´ì•¼ í•œë‹¤ê³  ì£¼ì¥í•œë‹¤. ì´ëŸ¬í•œ í”„ë¡œê·¸ë¨ ì›ì¹™ì„ CQSë¼ê³  í•˜ë©° í•œ í•¨ìˆ˜ì—ì„œëŠ” ë‘˜ì€ ë¶„ëª…íˆ êµ¬ë¶„í•´ì•¼ í•œë‹¤ê³  ë§í–ˆë‹¤. <br></p>\n<p>í•˜ì§€ë§Œ ìŠ¤íƒì˜ pop() ì—°ì‚° ê°™ì€ ê²½ìš°ëŠ” ìœ„ ë‘ê°€ì§€ë¥¼ ëª¨ë‘ ë‹´ë‹¹í•˜ê¸°ë„ í•œë‹¤. ì´ëŸ¬í•œ ì˜ˆì™¸ ìƒí™©ì€ ìœµí†µì„± ìˆê²Œ í—ˆìš©í•˜ëŠ” ê²ƒì´ ì „ë°˜ì ìœ¼ë¡œ ë” íš¨ìœ¨ì ì¼ ìˆ˜ ìˆë‹¤. <br></p>\n<p>ìœ„ ê°œë…ì€ í˜„ì¬ ì§„í–‰ì¤‘ì¸ í”„ë¡œì íŠ¸ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œì— ëŒ€í•œ í¬ë£¨ì˜ ì½”ë“œë¦¬ë·°ë¡œ ì ‘í•˜ê²Œ ë˜ì—ˆë‹¤. <br></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Post</span> newPost <span class=\"token operator\">=</span> post<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>updatedContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ìœ„ì™€ ê°™ì€ ê²½ìš° CQSë¥¼ ì¤€ìˆ˜í•˜ì§€ ì•Šì€ ê²ƒì´ë¯€ë¡œ ë‘˜ ì¤‘ í•˜ë‚˜ë¥¼ ë‹´ë‹¹í•˜ë„ë¡ êµ¬í˜„ë¡œì§ì„ ë°”ê¾¸ê³  í•„ìš”í•˜ë©´ ì¬ì¡°íšŒí•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ë¦¬íŒ©í† ë§ í–ˆë‹¤. <br></p>\n<br>\n<br>\n<p><strong>[ì°¸ê³ ìë£Œ]</strong></p>\n<ul>\n<li><a href=\"https://shoark7.github.io/programming/knowledge/command-and-query-method\">https://shoark7.github.io/programming/knowledge/command-and-query-method</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#intro\">Intro</a></li>\n<li><a href=\"#command-vs-query\">Command vs. Query</a></li>\n<li><a href=\"#cqs---command-query-separation\">CQS - Command Query Separation</a></li>\n</ul>\n</div>","frontmatter":{"date":"July 17, 2021","title":"CQS(Command Query Separation) ê°„ë‹¨íˆ ì•Œì•„ë³´ê¸°","categories":"ìë°”","author":"ì½”ë‹¤","emoji":"âœŠ"},"fields":{"slug":"/java-cqs/"}},"prev":{"id":"24937c05-73a7-52fc-9328-64c422c66fb2","html":"<h2 id=\"intro\" style=\"position:relative;\"><a href=\"#intro\" aria-label=\"intro permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Intro</h2>\n<ul>\n<li>ìŠ¤í”„ë§ë¶€íŠ¸ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë‹¤ë³´ë©´ ì›¹ mvcì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ì•¼í•  ë•Œê°€ ìˆë‹¤.</li>\n<li>ë•Œë¡œëŠ” ê° layerì— ëŒ€í•œ ìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê±°ë‚˜, ì¼ë¶€ë¶„ì— ëŒ€í•œ í†µí•© í…ŒìŠ¤íŠ¸ë§Œì„ ì§„í–‰í•  ë•Œ Mock í…ŒìŠ¤íŠ¸ë¥¼ í•´ì•¼í•  ë•Œë„ ìˆë‹¤.</li>\n<li>í…ŒìŠ¤íŠ¸ ê´€ë ¨ annotationì— ëŒ€í•´ì„œ ì •ë¦¬í•˜ê³  ê° annotationì˜ ì°¨ì´ ë° ì–¸ì œ ë¬´ì—‡ì„ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ì§€ ì •ë¦¬í•´ë³¸ë‹¤.</li>\n</ul>\n<br>\n<h2 id=\"code-classlanguage-textspringboottestcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textspringboottestcode\" aria-label=\"code classlanguage textspringboottestcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">@SpringBootTest</code></h2>\n<ul>\n<li><code class=\"language-text\">@SpringBootTest</code> ì–´ë…¸í…Œì´ì…˜ì€ <code class=\"language-text\">@SpringBootApplication</code> ì„ ì°¾ì•„ í•´ë‹¹ configurationì— ë§ì¶”ì–´ ì‹¤ì œ Spring web contextë¥¼ ì‹¤í–‰í–”ë‹¤.</li>\n<li>Spring contextì˜ ì„¤ì •ìœ¼ë¡œ ê·¸ëŒ€ë¡œ ì ìš©í•´ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ì•¼ í•  ê²½ìš°ì— í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ì„œ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.</li>\n<li>í•˜ì§€ë§Œ ì „ì²´ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë¡œë“œí•˜ëŠ” ë§Œí¼ êµ‰ì¥íˆ ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦°ë‹¤.</li>\n<li>ì‹¤ì œë¡œ <code class=\"language-text\">@SpringBootTest</code> ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì€ í…ŒìŠ¤íŠ¸ë¥¼ ëŒë ¤ë³¸ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ë¥´ ë¡œë”©í•˜ëŠ” ê¸´ ë¡œê·¸ê°€ ì°íˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">//... ì¼ë¶€ ìƒëµ\n20:37:26.255 [main] DEBUG org.springframework.test.context.support.TestPropertySourceUtils - Adding inlined properties to environment: {spring.jmx.enabled=false, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true, server.port=0}\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v2.5.2)\n\n//... ì¼ë¶€ ìƒëµ \n > Running with Spring Boot v2.5.2, Spring v5.3.8\n2021-08-16 20:37:26.559 DEBUG 4487 --- [           main] c.w.p.a.user.UserAcceptanceTest          : Running with Spring Boot v2.5.2, Spring v5.3.8\n2021-08-16 20:37:26.560 INFO  main o.s.boot.SpringApplication.logStartupProfileInfo L:663 \n > The following profiles are active: security,test\n2021-08-16 20:37:26.560  INFO 4487 --- [           main] c.w.p.a.user.UserAcceptanceTest          : The following profiles are active: security,test\n2021-08-16 20:37:27.252  INFO 4487 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2021-08-16 20:37:27.328  INFO 4487 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 70 ms. Found 4 JPA repository interfaces.\n2021-08-16 20:37:28.062  INFO 4487 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 0 (http)\n2021-08-16 20:37:28.068  INFO 4487 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2021-08-16 20:37:28.068  INFO 4487 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.48]\n2021-08-16 20:37:28.115  INFO 4487 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2021-08-16 20:37:28.116  INFO 4487 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1379 ms</code></pre></div>\n<br>\n<h2 id=\"code-classlanguage-textautoconfiguremockmvccode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textautoconfiguremockmvccode\" aria-label=\"code classlanguage textautoconfiguremockmvccode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">@AutoConfigureMockMvc</code></h2>\n<ul>\n<li>ìœ„ ì–´ë…¸í…Œì´ì…˜ì€ ë‹¤ìŒê³¼ ê°™ì´ <code class=\"language-text\">MockMvc</code>ë¥¼ ì£¼ì…ë°›ì•„ì„œ í†°ìº£ ì„œë²„ë¥¼ ë„ìš°ì§€ ì•Šì€ ìƒíƒœë¡œ API ìš”ì²­ ë¶€ë¶„ì„ Mocking í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ìŠ¤í”„ë§ ì»¨í…ìŠ¤íŠ¸ì˜ ë¹ˆì„ ëª¨ë‘ ë¡œë“œí•˜ëŠ” ê²ƒì€ <code class=\"language-text\">@SpringBootTest</code> ì™€ ë™ì¼í•˜ë‹¤.</li>\n<li><code class=\"language-text\">@SpringBootTest</code> ì™€ <code class=\"language-text\">@AutoConfigureMockMvc</code>ë¥¼ ì‚¬ìš©í•´ì„œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•´ë³´ë©´ ìœ„ <code class=\"language-text\">@SpringBootTest</code>ë¥¼ ì‚¬ìš©í–ˆì„ë•Œì™€ ë‹¤ë¥´ê²Œ Tomcatì„ ì‹œì‘í•˜ëŠ” ë¡œê·¸ê°€ ì°íˆì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<blockquote>\n<p>í…ŒìŠ¤íŠ¸ ì½”ë“œ</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@SpringBootTest</span>\n<span class=\"token annotation punctuation\">@AutoConfigureMockMvc</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">UserControllerTest</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">MockMvc</span> mockMvc<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì‚¬ìš©ìëŠ” ë‚´ í”„ë¡œí•„ì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">getAuthenticatedUserProfile_LoginUser_Success</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// given</span>\n        <span class=\"token class-name\">UserProfileResponseDto</span> responseDto <span class=\"token operator\">=</span> <span class=\"token class-name\">UserFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockLoginUserProfileResponseDto</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// when</span>\n        <span class=\"token class-name\">ResultActions</span> perform <span class=\"token operator\">=</span> mockMvc<span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/profiles/me\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpHeaders</span><span class=\"token punctuation\">.</span>AUTHORIZATION<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Bearer testToken\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">contentType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span>APPLICATION_JSON_VALUE<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">accept</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span>ALL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//...ë’¤ ì½”ë“œ ìƒëµ</span>\n\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p>ì‹¤í–‰ ì‹œ ë¡œê·¸</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">//...ì¼ë¶€ ìƒëµ \n21:41:00.201 [main] DEBUG org.springframework.test.context.support.TestPropertySourceUtils - Adding inlined properties to environment: {spring.jmx.enabled=false, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v2.5.2)\n\n//...ì¼ë¶€ ìƒëµ \n2021-08-16 21:41:03.332  INFO 4963 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''\n2021-08-16 21:41:03.333  INFO 4963 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''\n2021-08-16 21:41:03.334  INFO 4963 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms\n2021-08-16 21:41:03.349  INFO 4963 --- [           main] c.w.p.u.u.p.UserControllerTest           : Started UserControllerTest in 3.144 seconds (JVM running for 3.765)\n2021-08-16 21:41:03.524  INFO 4963 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'\n2021-08-16 21:41:03.525  INFO 4963 --- [ionShutdownHook] .SchemaDropperImpl$DelayedDropActionImpl : HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'\n2021-08-16 21:41:03.532  INFO 4963 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\n2021-08-16 21:41:03.537  INFO 4963 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.</code></pre></div>\n<h2 id=\"code-classlanguage-textwebmvctestcode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textwebmvctestcode\" aria-label=\"code classlanguage textwebmvctestcode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">@WebMvcTest</code></h2>\n<ul>\n<li><code class=\"language-text\">@WebMvcTest</code>ì˜ ê²½ìš° <code class=\"language-text\">@AutoConfigureMockMvc</code>ì™€ ë¹„ìŠ·í•˜ê²Œ ì„œë²„ê°€ ëª¨í‚¹ì´ ë˜ì§€ë§Œ MVCì™€ ê´€ë ¨ëœ ë¹ˆë“¤ë§Œ ë¡œë“œí•œë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— MVC ê´€ë ¨ ë¹ˆë“¤ë§Œ ì‚¬ìš©í•œë‹¤ë©´ ìœ„ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ë¶€í™”ê°€ ì ë‹¤.</li>\n<li>í•´ë‹¹ ì–´ë…¸í…Œì´ì…˜ ì•ˆì— íŠ¹ì • í´ë˜ìŠ¤ë¥¼ ì§€ì •í•˜ë©´ í•´ë‹¹ í´ë˜ìŠ¤ì™€ ê´€ë ¨í•œ mvc ë¹ˆë“¤ì´ ì˜¬ë¼ê°€ë¯€ë¡œ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@AutoConfigureRestDocs</span>\n<span class=\"token annotation punctuation\">@WebMvcTest</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">UserController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@ActiveProfiles</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">UserControllerTest</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">MockMvc</span> mockMvc<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì‚¬ìš©ìëŠ” ë‚´ í”„ë¡œí•„ì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">getAuthenticatedUserProfile_LoginUser_Success</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// given</span>\n        <span class=\"token class-name\">UserProfileResponseDto</span> responseDto <span class=\"token operator\">=</span> <span class=\"token class-name\">UserFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">mockLoginUserProfileResponseDto</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// when</span>\n        <span class=\"token class-name\">ResultActions</span> perform <span class=\"token operator\">=</span> mockMvc<span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/api/profiles/me\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpHeaders</span><span class=\"token punctuation\">.</span>AUTHORIZATION<span class=\"token punctuation\">,</span> <span class=\"token string\">\"Bearer testToken\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">contentType</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span>APPLICATION_JSON_VALUE<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">accept</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MediaType</span><span class=\"token punctuation\">.</span>ALL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//...ë’¤ ì½”ë“œ ìƒëµ</span>\n\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ìœ„ì™€ ë™ì¼í•˜ê²Œ Tomcat ê´€ë ¨ ë¡œê·¸ëŠ” ì°íˆì§€ ì•ŠëŠ”ë‹¤. ëŒ€ì‹  <code class=\"language-text\">SpringBootMockServletContext</code>ì´ ëª¨í‚¹ëœ ì„œë¸”ë¦¿ì„ ì´ˆê¸°í™” í•˜ëŠ” ë¡œê·¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2021-08-16 23:46:28.495  INFO 5504 --- [           main] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''\n2021-08-16 23:46:28.495  INFO 5504 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''\n2021-08-16 23:46:28.496  INFO 5504 --- [           main] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms</code></pre></div>\n<ul>\n<li>ì»¨íŠ¸ë¡¤ëŸ¬ ìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸ 8ê°œì— ëŒ€í•œ ê° MockMvc í…ŒìŠ¤íŠ¸ë¥¼ ë¹„êµí–ˆì„ ë•Œ, ë¯¸ì„¸í•˜ì§€ë§Œ <code class=\"language-text\">@WebMvcTest</code>ê°€ ë” ë¹ ë¥¸ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë” ë§ì€ ìˆ«ìì˜ í…ŒìŠ¤íŠ¸ ì¼ ë•Œ ê·¸ ì°¨ì´ëŠ” ë” ì»¤ì§„ë‹¤.</li>\n</ul>\n<p align=\"center\"><img width=\"600\" alt=\"á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-08-16 á„‹á…©á„’á…® 11 48 46\" src=\"https://user-images.githubusercontent.com/63405904/129583308-1e306f3c-0b51-4c97-8606-ee810a739289.png\"><br>@WebMvcTest ì‚¬ìš©</p>\n<p align=\"center\"><img width=\"600\" alt=\"á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-08-16 á„‹á…©á„’á…® 11 50 11\" src=\"https://user-images.githubusercontent.com/63405904/129583673-8bd736da-f88d-407f-a894-40f1e29a94fa.png\"><br>@AutoConfigureMockMvc ì‚¬ìš©</p>\n<br>\n<h2 id=\"code-classlanguage-textextendwithmockitoextensionclasscode\" style=\"position:relative;\"><a href=\"#code-classlanguage-textextendwithmockitoextensionclasscode\" aria-label=\"code classlanguage textextendwithmockitoextensionclasscode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">@ExtendWith(MockitoExtension.class)</code></h2>\n<ul>\n<li><code class=\"language-text\">@ExtendWith</code>ëŠ” JUnitì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤. (ìœ„ í…ŒìŠ¤íŠ¸ ì–´ë…¸í…Œì´ì…˜ì€ SpringBootì—ì„œ ì œê³µí•œë‹¤.)</li>\n<li>í”íˆ ì½”ë“œì—ì„œ <code class=\"language-text\">@ExtendWith(MockitoExtension.class)</code>ìœ¼ë¡œ ë§ì´ ì‚¬ìš©í•˜ê³  ìœ„ì˜ ëª¨í‚¹ê³¼ ì–´ë– í•œ ë¶€ë¶„ì´ ë‹¤ë¥¸ì§€ì— ëŒ€í•´ì„œ ë§ì´ í—·ê°ˆë ¤í•œë‹¤.</li>\n<li>ìœ„ ëª¨í‚¹ì€ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì— ëŒ€í•œ ëª¨í‚¹ì„ ìŠ¤í”„ë§ ë¶€íŠ¸ ì—ì„œ ì œê³µí•˜ëŠ” ê²ƒì´ë‹¤.</li>\n<li><code class=\"language-text\">@ExtendWith(MockitoExtension.class)</code> ì€ Mockì´ë¼ëŠ” ê°€ì§œ ê°ì²´ë¥¼ ì§€ì›í•˜ëŠ” Mockito í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ë¥¼ JUnit5ì™€ ì—°ë™í•˜ì—¬ ì‚¬ìš©í•˜ë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤. (ë‘ ê°œì˜ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ì˜ ê²°í•©)</li>\n<li>ì£¼ë¡œ í•˜ë‚˜ì˜ Layerì˜ ë‹¨ìœ„í…ŒìŠ¤íŠ¸ë¥¼ í•  ë•Œ ë‚˜ë¨¸ì§€ ê°ì²´ë“¤ì„ ëª¨í‚¹í•˜ë„ë¡ ì§€ì›í•œë‹¤.</li>\n<li>ì¦‰, ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì™€ ìƒê´€ì—†ì´ ì–´ëŠ í•œ ê°ì²´ì— ëŒ€í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì˜ì¡´í•˜ê³  ìˆëŠ” ë‹¤ë¥¸ ê°ì²´ì˜ í–‰ë™ì„ stubí•˜ì—¬ ì œì–´í•  ë•Œ ì‚¬ìš©ëœë‹¤.</li>\n</ul>\n<br>\n<br>\n<p><strong>[ì¶œì²˜]</strong></p>\n<ul>\n<li><a href=\"https://spring.io/guides/gs/testing-web/\">https://spring.io/guides/gs/testing-web/</a></li>\n<li><a href=\"https://elevatingcodingclub.tistory.com/61\">https://elevatingcodingclub.tistory.com/61</a></li>\n<li><a href=\"https://meetup.toast.com/posts/124\">https://meetup.toast.com/posts/124</a></li>\n<li><a href=\"https://www.baeldung.com/spring-boot-testing\">https://www.baeldung.com/spring-boot-testing</a></li>\n<li><a href=\"https://junit.org/junit5/docs/current/user-guide/#extensions\">https://junit.org/junit5/docs/current/user-guide/#extensions</a></li>\n<li><a href=\"https://pinokio0702.tistory.com/143\">https://pinokio0702.tistory.com/143</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#intro\">Intro</a></li>\n<li><a href=\"#springboottest\"><code class=\"language-text\">@SpringBootTest</code></a></li>\n<li><a href=\"#autoconfiguremockmvc\"><code class=\"language-text\">@AutoConfigureMockMvc</code></a></li>\n<li><a href=\"#webmvctest\"><code class=\"language-text\">@WebMvcTest</code></a></li>\n<li><a href=\"#extendwithmockitoextensionclass\"><code class=\"language-text\">@ExtendWith(MockitoExtension.class)</code></a></li>\n</ul>\n</div>","frontmatter":{"date":"August 17, 2021","title":"Springboot ì–¸ì œ ì–´ë–¤ í…ŒìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í• ê¹Œ","categories":"ìŠ¤í”„ë§ë¶€íŠ¸ í…ŒìŠ¤íŠ¸","author":"ì½”ë‹¤","emoji":"ğŸ–¥"},"fields":{"slug":"/spring-boot-test/"}},"site":{"siteMetadata":{"siteUrl":"https://yjksw.github.io","comments":{"utterances":{"repo":"yjksw/yjksw.github.io"}}}}},"pageContext":{"slug":"/jpa-lazyinitialization-exception/","nextSlug":"/java-cqs/","prevSlug":"/spring-boot-test/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}